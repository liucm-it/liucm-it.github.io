{"meta":{"title":"Kermit's Blog","subtitle":"刘朝铭的网络博客","description":"一个博客、一个记录、一份笔记","author":"Kermit Liu","url":"https://blog.liuchaoming.cn","root":"/"},"pages":[{"title":"所有分类","date":"2019-09-21T04:35:51.261Z","updated":"2019-09-21T04:35:51.261Z","comments":true,"path":"categories/index.html","permalink":"https://blog.liuchaoming.cn/categories/index.html","excerpt":"","text":""},{"title":"给我留言","date":"2019-10-04T13:44:11.303Z","updated":"2019-10-04T13:44:11.303Z","comments":true,"path":"comments/index.html","permalink":"https://blog.liuchaoming.cn/comments/index.html","excerpt":"","text":"欢迎灌水"},{"title":"我的友链","date":"2019-09-21T10:52:29.000Z","updated":"2019-10-04T13:53:33.815Z","comments":true,"path":"friends/index.html","permalink":"https://blog.liuchaoming.cn/friends/index.html","excerpt":"","text":"各位大佬想交换友链的话可以在下方留言，必须要有名称、头像链接、和至少一个标签哦～ 名称： Kermit’ Blog头像： https://cdn.jsdelivr.net/gh/liucm-it/ImgHosting/pic/head-img.jpg网址： https://blog.liuchaoming.cn标签： Java、Web前端 分组和标签不合适的话可以留言或者发邮件私聊我进行更改。"},{"title":"所有标签","date":"2019-09-21T04:36:03.427Z","updated":"2019-09-21T04:36:03.427Z","comments":true,"path":"tags/index.html","permalink":"https://blog.liuchaoming.cn/tags/index.html","excerpt":"","text":""},{"title":"","date":"2019-09-21T11:19:51.856Z","updated":"2019-09-21T11:19:51.856Z","comments":true,"path":"404.html","permalink":"https://blog.liuchaoming.cn/404.html","excerpt":"","text":"var QZONE = window.QZONE || {}; function imagezoom(imgobj, box_w, box_h) { var src_w = imgobj.width; var src_h = imgobj.height; var r1 = src_w / src_h, r2 = box_w / box_h; var dst_w, dst_h; if (r1 > r2) { dst_w = box_w; dst_h = Math.round(dst_w / src_w * src_h); } else { if (r1 < r2) { dst_h = box_h; dst_w = Math.round(dst_h / src_h * src_w); } else { dst_w = box_w; dst_h = box_h; } } imgobj.style.marginLeft = (box_w - dst_w) / 2 + \"px\"; imgobj.style.marginTop = (box_h - dst_h) / 2 + \"px\"; imgobj.style.width = dst_w + \"px\"; imgobj.style.height = dst_h + \"px\"; imgobj.style.opacity = 1; } (function(_w, _d) { var ha = _d.head || _d.getElementsByTagName(\"head\")[0]; var $scope = {}; var current; var tmnow; var chId; var homePageUrl, homePageName; var scs = document.getElementsByTagName(\"script\"); if (location.href.indexOf(\"fm.qq.com\") > -1 || location.href.indexOf(\"fm.qzone.qq.com\") > -1) { homePageName = \"\\u8fd4\\u56de\\u4f01\\u9e45FM\"; homePageUrl = \"http://fm.qq.com\"; } else { if (location.href.indexOf(\"qzone.qq.com\") > -1) { homePageName = \"\\u8fd4\\u56de\\u6211\\u7684\\u7a7a\\u95f4\"; homePageUrl = \"http://qzone.qq.com\"; } else { homePageName = \"\\u8fd4\\u56de\\u817e\\u8baf\\u7f51\"; homePageUrl = \"http://www.qq.com\"; } } for (var i = 0;i < scs.length;i++) { if (scs[i].src.indexOf(\"404/search_children.js\") > -1) { if (scs[i].getAttribute(\"homePageUrl\")) { homePageUrl = scs[i].getAttribute(\"homePageUrl\"); } if (scs[i].getAttribute(\"homePageName\")) { homePageName = scs[i].getAttribute(\"homePageName\"); } break; } } $scope.rettext = homePageName; $scope.retlink = homePageUrl; function getData(srcUrl, callback) { var sc = _d.createElement(\"script\"); function orc() { if (sc.readyState === \"loaded\") { setTimeout(function() { callback && callback(); }, 0); } } if (sc.addEventListener) { if (callback) { sc.addEventListener(\"load\", callback, false); } } else { sc.attachEvent(\"onreadystatechange\", orc); } ha && ha.appendChild(sc); sc.src = srcUrl; } function resolveData(d) { var tid, len, ddata = [], tdata; if (\"object\" == typeof d && (d.data && (len = d.data.length))) { for (var i = 0;i < len;i++) { var expire = d.data[i].expire; d.data[i]._id = new Date * Math.random() * Math.random() * 1E7; if (expire && tmnow * 1E3 < Date.parse(expire.replace(/\\s[\\s\\S]*$/, \"\").replace(/\\-/g, \"/\"))) { var _c = d.data[i].city, _p = d.data[i].province; if (_c && city) { if ((\"_\" + _c + \"_\").indexOf(\"_\" + city + \"_\") > -1) { ddata.push(d.data[i]); continue; } } if (_p && province) { if ((\"_\" + _p + \"_\").indexOf(\"_\" + province + \"_\") > -1) { ddata.push(d.data[i]); } } } } tid = Math.floor(Math.random() * (ddata.length || len)); tdata = (ddata.length ? ddata : d.data)[chId = tid]; if (_w.foundjsondata) { tdata.ta = tdata.sex.indexOf(\"\\u5973\") > -1 ? \"\\u5979\" : \"\\u4ed6\"; tdata.name = \"\\u201c7\\u00b718\\u7279\\u5927\\u62d0\\u5356\\u5a74\\u513f\\u6848\\u201d\\u544a\\u7834\\uff0c\\u88ab\\u89e3\\u6551\\u768415\\u540d\\u5b69\\u5b50\\u4e2d\\uff0c2\\u4eba\\u7531\\u4eb2\\u751f\\u7236\\u6bcd\\u9886\\u56de\\uff0c\\u4ecd\\u670913\\u540d\\u5b69\\u5b50\\u672a\\u627e\\u5230\\u4eb2\\u751f\\u7236\\u6bcd\\uff0c\\u88ab\\u5b89\\u7f6e\\u5728\\u60e0\\u5dde\\u5e02\\u793e\\u4f1a\\u798f\\u5229\\u9662\\uff0c\" + tdata.ta + \"\\u662f\\u5176\\u4e2d\\u4e4b\\u4e00\\u3002\"; tdata.url = tdata.url.replace(/#p=(\\d{1,2})/, function(a, n) { return \"#p=\" + (+n + 1); }); return format(tmpl2, tdata); } if (!tdata.ext1) { tdata.ext1 = \"\\u4f46\\u6211\\u4eec\\u53ef\\u4ee5\\u4e00\\u8d77\\u5bfb\\u627e\\u5931\\u8e2a\\u5b9d\\u8d1d\"; } return tdata; } } function setTopData(tdata) { current = tdata; $scope.topname = tdata.name; $scope.topgender = tdata.sex; $scope.topbirth = tdata.birth_time; $scope.toplostdate = tdata.lost_time; $scope.toplostplace = tdata.lost_place; $scope.toplostdesc = tdata.child_feature; $scope.toplink = tdata.url; $scope.topimg = tdata.child_pic; $scope.topid = tdata._id; document.body.innerHTML = template(\"body\", $scope); } function init(data) { tmnow = data.tm_now * 1E3; var tdata = resolveData(jsondata); $scope.whichin = 0; jsondata.data.splice(chId, 1); $scope.otherdata = [tdata].concat(jsondata.data.slice(0, 5)); setTopData(tdata); } var timeout; window._Callback = function(d) { clearTimeout(timeout); init(d); }; timeout = setTimeout(function() { _Callback({tm_now:(new Date).getTime() / 1E3}); }, 2E3); _w.share = function(target) { var summary = [\"\\u80cc\\u666f\\uff1a\", current.name, \"\\uff0c\\u6027\\u522b\\uff1a\", current.sex, \"\\uff0c\\u51fa\\u751f\\u65f6\\u95f4\\uff1a\", current.birth_time, \"\\uff0c\\u5931\\u8e2a\\u65f6\\u95f4\\uff1a\", current.lost_time, \"\\uff0c\\u7279\\u5f81\\u63cf\\u8ff0\\uff1a\", current.child_feature].join(\"\"); if (summary) { summary = \"#\\u5bfb\\u627e\\u5931\\u8e2a\\u7684\\u5b9d\\u8d1d#\" + summary; } var stitle = \"\\u5931\\u8e2a\\u7684\\u5b9d\\u8d1d\\u8be6\\u60c5\"; var desc = \"\\u5931\\u8e2a\\u7684\\u5b9d\\u8d1d\\u8981\\u56de\\u5bb6\\uff0c\\u5feb\\u6765\\u53c2\\u4e0e\\u7231\\u5fc3\\u7684\\u4f20\\u9012\\u5427\\uff01\"; var encode = encodeURIComponent; var opts = {\"surl\":\"http://qzone.qq.com/gy/404/\" + current.id + \"/lostchild.html\", \"site\":\"QQ\\u7a7a\\u95f4\", \"summary\":summary || \"#\\u5b9d\\u8d1d\\u56de\\u5bb6#\\u817e\\u8baf\\u5fd7\\u613f\\u8005\\u7528\\u6280\\u672f\\u70b9\\u4eae\\u516c\\u76ca\\uff0c\\u8ba9\\u6211\\u4eec\\u4e00\\u8d77\\u5bfb\\u627e\\u8d70\\u5931\\u7684\\u513f\\u7ae5\\u5427\\uff01\", \"stitle\":stitle, \"pics\":current.child_pic, \"desc\":desc, \"origin_url\":current.url}; var surl = opts.surl || \"http://www.qq.com/404/\", summary = opts.summary || \"\\u8fd9\\u4e2a\\u662f\\u5206\\u4eab\\u7684\\u5185\\u5bb9\", stitle = opts.stitle || \"\\u8fd9\\u4e2a\\u662f\\u5206\\u4eab\\u7684\\u6807\\u9898\", pics = opts.pics || \"http://qzonestyle.gtimg.cn/qzone_v6/act/img/20120422_qzone_7_years/pop_up/icon-pop-seven-years.png\", site = opts.site || \"\\u8fd9\\u4e2a\\u662f\\u5206\\u4eab\\u94fe\\u63a5\\u7684\\u6587\\u5b57\", desc = opts.desc || \"\\u5931\\u8e2a\\u7684\\u5b9d\\u8d1d\\u8981\\u56de\\u5bb6\\uff0c\\u5feb\\u6765\\u53c2\\u4e0e\\u7231\\u5fc3\\u7684\\u4f20\\u9012\\u5427\\uff01\", origin_url = opts.origin_url || \"http://www.qq.com/404/\"; var shareList = {weibo:{method:function(evt) { var w = \"http://v.t.qq.com/share/share.php\", q = [\"?site=\", encode(surl + \"#via=share_t_weib\"), \"&title=\", encode(summary), \"&pic=\", encode(pics), \"&url=\", encode(surl)].join(\"\"), p = [w, q].join(\"\"); openit(p, \"weibo\", \"width=700, height=680, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no\"); }}, qzone:{method:function(evt) { var buff = [], ps = {url:surl + \"#via=404-qzoneshare\", desc:desc || \"\\u5931\\u8e2a\\u7684\\u5b9d\\u8d1d\\u8981\\u56de\\u5bb6\\uff0c\\u5feb\\u6765\\u53c2\\u4e0e\\u7231\\u5fc3\\u7684\\u4f20\\u9012\\u5427\\uff01\", summary:summary, title:stitle, pics:pics, site:site}; for (var k in ps) { buff.push(k + \"=\" + encode(ps[k] || \"\")); } var w = \"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?\" + buff.join(\"&\"), q = [\"#via=share_t_qzone\", \"&title=\", encode(summary), \"&pic=\", encode(pics), \"&url=\", encode(surl)].join(\"\"), p = [w, q].join(\"\"); openit(p, \"qzone\", \"width=700, height=680, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no\"); }}, sina:{method:function() { var w = \"http://v.t.sina.com.cn/share/share.php\", q = [\"?url=\", encode(surl + \"#via=share_x_weib\"), \"&title=\", encode(summary), \"&source=\", \"&sourceUrl=\", surl, \"&content=utf-8\", \"&pic=\", encode(pics)].join(\"\"), p = [w, q].join(\"\"); openit(p, \"sina\", \"toolbar=0,status=0,resizable=1,width=440,height=430\"); }}, kaixin:{method:function() { var n = \"http://www.kaixin001.com/repaste/bshare.php?rurl=\" + encode(surl + \"#via=share_kaixin\") + \"&rcontent=&rtitle=\" + encode(summary); openit(n, \"kaixin\", \"toolbar=0,status=0,resizable=1,width=600,height=360\"); }}, renren:{method:function() { var n = \"http://www.connect.renren.com/share/sharer?title=\" + encode(summary) + \"&url=\" + encode(surl + \"#via=share_renren\"), p = window.open(n, \"rr\", \"toolbar=0,status=0,resizable=1,width=510,height=300\"); if (p) { p.focus(); } }}, weixin:{method:function() { var n = \"http://qzone.qq.com/gy/404/page/qrcode.html?url=\" + encode(origin_url + \"#via=share_weixin\"), p = window.open(n, \"rr\", \"toolbar=0,status=0,resizable=1,width=620,height=430\"); if (p) { p.focus(); } }}}; var openit = function(u, n, p) { function o() { var z; if (!(z = window.open(u, n, p))) { location.href = u; } else { z.focus(); } } o(); }; shareList[target] && shareList[target].method(); }; _w.toThis = function(id) { for (var i = 0;i < $scope.otherdata.length;i++) { if ($scope.otherdata[i]._id == id) { setTopData($scope.otherdata[i]); break; } } return false; }; var meta = document.createElement(\"meta\"); meta.name = \"viewport\"; meta.content = \"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\"; ha.appendChild(meta); (function registerStyle() { var link = document.createElement(\"link\"); link.rel = \"stylesheet\"; link.type = \"text/css\"; link.href = \"https://qzone.qq.com/gy/404/style/404style.css\"; ha.appendChild(link); })(); (function initStat() { var qqDomainNameRE = /\\.qq\\.com$/i, qzoneDomainNameRE = /\\bqzone\\.qq\\.com$/i, qzsDomainNameRE = /\\bqzonestyle\\.gtimg\\.cn$/i; function cb() { var url = location.host; var src = \"\"; if (qzoneDomainNameRE.test(url)) { src = \"new404.qzone\"; } else { if (qqDomainNameRE.test(url)) { src = \"new404.qq\"; } else { if (qzsDomainNameRE.test(url)) { src = \"new404.qzonestyle\"; } else { src = url.replace(\".\", \"_\"); } } } _w.TCISD && (_w.TCISD.pv && _w.TCISD.pv(\"hat.qzone.qq.com\", \"/gy/lostchild/\" + src)); } getData(\"https://qzonestyle.gtimg.cn/ac/qzfl/stat.js\", cb); })(); })(window, document); !function() { function a(a, b) { return(/string|function/.test(typeof b) ? h : g)(a, b); } function b(a, c) { return \"string\" != typeof a && (c = typeof a, \"number\" === c ? a += \"\" : a = \"function\" === c ? b(a.call(a)) : \"\"), a; } function c(a) { return l[a]; } function d(a) { return b(a).replace(/&(?![\\w#]+;)|[\"']/g, c); } function e(a, b) { if (m(a)) { for (var c = 0, d = a.length;d > c;c++) { b.call(a, a[c], c, a); } } else { for (c in a) { b.call(a, a[c], c); } } } function f(a, b) { var c = /(\\/)[^/]+\\1\\.\\.\\1/, d = (\"./\" + a).replace(/[^/]+$/, \"\"), e = d + b; for (e = e.replace(/\\/\\.\\//g, \"/\");e.match(c);) { e = e.replace(c, \"/\"); } return e; } function g(b, c) { var d = a.get(b) || i({filename:b, name:\"Render Error\", message:\"Template not found\"}); return c ? d(c) : d; } function h(a, b) { if (\"string\" == typeof b) { var c = b; b = function() { return new k(c); }; } var d = j[a] = function(c) { try { return new b(c, a) + \"\"; } catch (d) { return i(d)(); } }; return d.prototype = b.prototype = n, d.toString = function() { return b + \"\"; }, d; } function i(a) { var b = \"{Template Error}\", c = a.stack || \"\"; if (c) { c = c.split(\"\\n\").slice(0, 2).join(\"\\n\"); } else { for (var d in a) { c += \"\\n\" + a[d] + \"\\n\\n\"; } } return function() { return \"object\" == typeof console && console.error(b + \"\\n\\n\" + c), b; }; } var j = a.cache = {}, k = this.String, l = {\"\":\"&#62;\", '\"':\"&#34;\", \"'\":\"&#39;\", \"&\":\"&#38;\"}, m = Array.isArray || function(a) { return \"[object Array]\" === {}.toString.call(a); }, n = a.utils = {$helpers:{}, $include:function(a, b, c) { return a = f(c, a), g(a, b); }, $string:b, $escape:d, $each:e}, o = a.helpers = n.$helpers; a.get = function(a) { return j[a.replace(/^\\.\\//, \"\")]; }, a.helper = function(a, b) { o[a] = b; }, \"function\" == typeof define ? define(function() { return a; }) : \"undefined\" != typeof exports ? module.exports = a : this.template = a, a(\"body\", function(a) { var b = this, c = (b.$helpers, b.$escape), d = a.retlink, e = a.rettext, f = a.topid, g = a.topimg, h = a.topname, i = a.topgender, j = a.topbirth, l = a.toplostdate, m = a.toplostplace, n = a.toplostdesc, o = a.toplink, p = b.$each, q = a.otherdata, r = (a.otheritem, a.index, \"\"); return r += ' 404\\uff0c\\u60a8\\u8bbf\\u95ee\\u7684\\u9875\\u9762\\u627e\\u4e0d\\u56de\\u6765\\u4e86\\uff0c\\u4f46\\u6211\\u4eec\\u53ef\\u4ee5\\u4e00\\u8d77\\u5e2e\\u4ed6\\u4eec\\u56de\\u5bb6\\uff01 ', r += c(e), r += ' ', r += c(h), r += '(', r += c(i), r += ') \\u51fa\\u751f\\u65e5\\u671f\\uff1a', r += c(j), r += ' \\u5931\\u8e2a\\u65f6\\u95f4\\uff1a', r += c(l), r += ' \\u5931\\u8e2a\\u5730\\u70b9\\uff1a', r += c(m), r += ' \\u5931\\u8e2a\\u4eba\\u7279\\u5f81\\u63cf\\u8ff0\\uff1a', r += c(n), r += ' \\u67e5\\u770b\\u8be6\\u60c5 \\u5206\\u4eab \\u817e\\u8baf\\u5fae\\u535a QQ\\u7a7a\\u95f4 \\u65b0\\u6d6a\\u5fae\\u535a \\u5fae\\u4fe1 ', p(q, function(a) { r += ' '; }), r += \" \", new k(r); }); }(); L2Dwidget.init({\"pluginRootPath\":\"live2dw/\",\"pluginJsPath\":\"lib/\",\"pluginModelPath\":\"assets/\",\"tagMode\":false,\"log\":false,\"model\":{\"jsonPath\":\"/live2dw/assets/hibiki.model.json\"},\"display\":{\"position\":\"left\",\"width\":150,\"height\":300},\"mobile\":{\"show\":true},\"react\":{\"opacity\":0.7}});"},{"title":"","date":"2019-10-04T13:41:00.305Z","updated":"2019-10-04T13:41:00.305Z","comments":true,"path":"about/index.html","permalink":"https://blog.liuchaoming.cn/about/index.html","excerpt":"","text":"Kermit's Blog | About document.onkeydown = function () { if (window.event && window.event.keyCode == 123) { event.keyCode = 0; event.returnValue = false; return false; } }; 您的浏览器不支持audio标签，无法播放音乐！ 江湖名称：Kermit 常驻之地：中国 | 上海 初度之辰：90后 兴趣爱好：编程 | 乒乓球 | 游戏 技能简介 | Skill HTML/CSS/JS 80% JAVA 85% PHP 50% VUE 80% GIT 90% SVN 80% Hexo 70% 个人简介 | Introduction ● 学历：本科； ● 现况：Java后端、Web前端开发； ● 目标：Java后端 or 前端开发工程师； ● 博客：记录学习过程，厚积才能薄发； ● 兴趣：兴趣是最好的老师； ● 其他：虽然很菜，但是正在努力学习中！ 联系我 | Contact me Copyright © 2019 Kermit's Blog. All rights reserved. if ('addEventListener' in window) { window.addEventListener('load', function () { document.body.className = document.body.className.replace(/\\bis-loading\\b/, ''); }); document.body.className += (navigator.userAgent.match(/(MSIE|rv:11\\.0)/) ? ' is-ie' : ''); } uniform mat4 uProjection; uniform mat4 uModelview; uniform vec3 uResolution; uniform vec3 uOffset; uniform vec3 uDOF; //x:focus distance, y:focus radius, z:max radius uniform vec3 uFade; //x:start distance, y:half distance, z:near fade start attribute vec3 aPosition; attribute vec3 aEuler; attribute vec2 aMisc; //x:size, y:fade varying vec3 pposition; varying float psize; varying float palpha; varying float pdist; //varying mat3 rotMat; varying vec3 normX; varying vec3 normY; varying vec3 normZ; varying vec3 normal; varying float diffuse; varying float specular; varying float rstop; varying float distancefade; void main(void) { // Projection is based on vertical angle vec4 pos = uModelview * vec4(aPosition + uOffset, 1.0); gl_Position = uProjection * pos; gl_PointSize = aMisc.x * uProjection[1][1] / -pos.z * uResolution.y * 0.5; pposition = pos.xyz; psize = aMisc.x; pdist = length(pos.xyz); palpha = smoothstep(0.0, 1.0, (pdist - 0.1) / uFade.z); vec3 elrsn = sin(aEuler); vec3 elrcs = cos(aEuler); mat3 rotx = mat3( 1.0, 0.0, 0.0, 0.0, elrcs.x, elrsn.x, 0.0, -elrsn.x, elrcs.x ); mat3 roty = mat3( elrcs.y, 0.0, -elrsn.y, 0.0, 1.0, 0.0, elrsn.y, 0.0, elrcs.y ); mat3 rotz = mat3( elrcs.z, elrsn.z, 0.0, -elrsn.z, elrcs.z, 0.0, 0.0, 0.0, 1.0 ); mat3 rotmat = rotx * roty * rotz; normal = rotmat[2]; mat3 trrotm = mat3( rotmat[0][0], rotmat[1][0], rotmat[2][0], rotmat[0][1], rotmat[1][1], rotmat[2][1], rotmat[0][2], rotmat[1][2], rotmat[2][2] ); normX = trrotm[0]; normY = trrotm[1]; normZ = trrotm[2]; const vec3 lit = vec3(0.6917144638660746, 0.6917144638660746, -0.20751433915982237); float tmpdfs = dot(lit, normal); if(tmpdfs < 0.0) { normal = -normal; tmpdfs = dot(lit, normal); } diffuse = 0.4 + tmpdfs; vec3 eyev = normalize(-pos.xyz); if(dot(eyev, normal) > 0.0) { vec3 hv = normalize(eyev + lit); specular = pow(max(dot(hv, normal), 0.0), 20.0); } else { specular = 0.0; } rstop = clamp((abs(pdist - uDOF.x) - uDOF.y) / uDOF.z, 0.0, 1.0); rstop = pow(rstop, 0.5); //-0.69315 = ln(0.5) distancefade = min(1.0, exp((uFade.x - pdist) * 0.69315 / uFade.y)); } #ifdef GL_ES //precision mediump float; precision highp float; #endif uniform vec3 uDOF; //x:focus distance, y:focus radius, z:max radius uniform vec3 uFade; //x:start distance, y:half distance, z:near fade start const vec3 fadeCol = vec3(0.08, 0.03, 0.06); varying vec3 pposition; varying float psize; varying float palpha; varying float pdist; //varying mat3 rotMat; varying vec3 normX; varying vec3 normY; varying vec3 normZ; varying vec3 normal; varying float diffuse; varying float specular; varying float rstop; varying float distancefade; float ellipse(vec2 p, vec2 o, vec2 r) { vec2 lp = (p - o) / r; return length(lp) - 1.0; } void main(void) { vec3 p = vec3(gl_PointCoord - vec2(0.5, 0.5), 0.0) * 2.0; vec3 d = vec3(0.0, 0.0, -1.0); float nd = normZ.z; //dot(-normZ, d); if(abs(nd) < 0.0001) discard; float np = dot(normZ, p); vec3 tp = p + d * np / nd; vec2 coord = vec2(dot(normX, tp), dot(normY, tp)); //angle = 15 degree const float flwrsn = 0.258819045102521; const float flwrcs = 0.965925826289068; mat2 flwrm = mat2(flwrcs, -flwrsn, flwrsn, flwrcs); vec2 flwrp = vec2(abs(coord.x), coord.y) * flwrm; float r; if(flwrp.x < 0.0) { r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.36, 0.96) * 0.5); } else { r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.58, 0.96) * 0.5); } if(r > rstop) discard; vec3 col = mix(vec3(1.0, 0.8, 0.75), vec3(1.0, 0.9, 0.87), r); float grady = mix(0.0, 1.0, pow(coord.y * 0.5 + 0.5, 0.35)); col *= vec3(1.0, grady, grady); col *= mix(0.8, 1.0, pow(abs(coord.x), 0.3)); col = col * diffuse + specular; col = mix(fadeCol, col, distancefade); float alpha = (rstop > 0.001)? (0.5 - r / (rstop * 2.0)) : 1.0; alpha = smoothstep(0.0, 1.0, alpha) * palpha; gl_FragColor = vec4(col * 0.5, alpha); } uniform vec3 uResolution; attribute vec2 aPosition; varying vec2 texCoord; varying vec2 screenCoord; void main(void) { gl_Position = vec4(aPosition, 0.0, 1.0); texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5); screenCoord = aPosition.xy * vec2(uResolution.z, 1.0); } #ifdef GL_ES //precision mediump float; precision highp float; #endif uniform vec2 uTimes; varying vec2 texCoord; varying vec2 screenCoord; void main(void) { vec3 col; float c; vec2 tmpv = texCoord * vec2(0.8, 1.0) - vec2(0.95, 1.0); c = exp(-pow(length(tmpv) * 1.8, 2.0)); col = mix(vec3(0.02, 0.0, 0.03), vec3(0.96, 0.98, 1.0) * 1.5, c); gl_FragColor = vec4(col * 0.5, 1.0); } #ifdef GL_ES //precision mediump float; precision highp float; #endif uniform sampler2D uSrc; uniform vec2 uDelta; varying vec2 texCoord; varying vec2 screenCoord; void main(void) { vec4 col = texture2D(uSrc, texCoord); gl_FragColor = vec4(col.rgb * 2.0 - vec3(0.5), 1.0); } #ifdef GL_ES //precision mediump float; precision highp float; #endif uniform sampler2D uSrc; uniform vec2 uDelta; uniform vec4 uBlurDir; //dir(x, y), stride(z, w) varying vec2 texCoord; varying vec2 screenCoord; void main(void) { vec4 col = texture2D(uSrc, texCoord); col = col + texture2D(uSrc, texCoord + uBlurDir.xy * uDelta); col = col + texture2D(uSrc, texCoord - uBlurDir.xy * uDelta); col = col + texture2D(uSrc, texCoord + (uBlurDir.xy + uBlurDir.zw) * uDelta); col = col + texture2D(uSrc, texCoord - (uBlurDir.xy + uBlurDir.zw) * uDelta); gl_FragColor = col / 5.0; } #ifdef GL_ES //precision mediump float; precision highp float; #endif uniform sampler2D uSrc; uniform vec2 uDelta; varying vec2 texCoord; varying vec2 screenCoord; void main(void) { gl_FragColor = texture2D(uSrc, texCoord); } uniform vec3 uResolution; attribute vec2 aPosition; varying vec2 texCoord; varying vec2 screenCoord; void main(void) { gl_Position = vec4(aPosition, 0.0, 1.0); texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5); screenCoord = aPosition.xy * vec2(uResolution.z, 1.0); } #ifdef GL_ES //precision mediump float; precision highp float; #endif uniform sampler2D uSrc; uniform sampler2D uBloom; uniform vec2 uDelta; varying vec2 texCoord; varying vec2 screenCoord; void main(void) { vec4 srccol = texture2D(uSrc, texCoord) * 2.0; vec4 bloomcol = texture2D(uBloom, texCoord); vec4 col; col = srccol + bloomcol * (vec4(1.0) + srccol); col *= smoothstep(1.0, 0.0, pow(length((texCoord - vec2(0.5)) * 2.0), 1.2) * 0.5); col = pow(col, vec4(0.45454545454545)); //(1.0 / 2.2) gl_FragColor = vec4(col.rgb, 1.0); gl_FragColor.a = 1.0; } L2Dwidget.init({\"pluginRootPath\":\"live2dw/\",\"pluginJsPath\":\"lib/\",\"pluginModelPath\":\"assets/\",\"tagMode\":false,\"log\":false,\"model\":{\"jsonPath\":\"/live2dw/assets/hibiki.model.json\"},\"display\":{\"position\":\"left\",\"width\":150,\"height\":300},\"mobile\":{\"show\":true},\"react\":{\"opacity\":0.7}});"}],"posts":[{"title":"Git设置只需要输入一次密码, 就可以进行pull/push操作，不用每次输入密码","slug":"Git设置永久保存密码","date":"2019-09-28T13:38:08.000Z","updated":"2019-09-28T14:01:23.750Z","comments":true,"path":"2019/09/28/Git设置永久保存密码/","link":"","permalink":"https://blog.liuchaoming.cn/2019/09/28/Git设置永久保存密码/","excerpt":"使用https的方式，每次pull或者push都要输入账号密码，这样操作很烦，又不想设置SSH公钥到远程仓库。如下设置即可输入一次就不用再手输入密码的困扰而且又享受https带来的极速和方便。","text":"使用https的方式，每次pull或者push都要输入账号密码，这样操作很烦，又不想设置SSH公钥到远程仓库。如下设置即可输入一次就不用再手输入密码的困扰而且又享受https带来的极速和方便。 设置输入一次密码后记住密码（默认时间15分钟）： 1git config --global credential.helper cache 也可以自己设置时间，比如一个小时之后失效，可以这样做： 1git config credential.helper &apos;cache --timeout=3600&apos; 还可以永久存储密码： 1git config --global credential.helper store","categories":[{"name":"Git","slug":"Git","permalink":"https://blog.liuchaoming.cn/categories/Git/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://blog.liuchaoming.cn/tags/Git/"}]},{"title":"Git提交时忽略已提交过且本地修改过的文件","slug":"Git提交时忽略已提交过且本地修改过的文件","date":"2019-09-26T11:04:27.000Z","updated":"2019-09-26T11:11:37.774Z","comments":true,"path":"2019/09/26/Git提交时忽略已提交过且本地修改过的文件/","link":"","permalink":"https://blog.liuchaoming.cn/2019/09/26/Git提交时忽略已提交过且本地修改过的文件/","excerpt":"有的时候项目的配置文件和测试环境的不一样，本地开发时需要将配置改为本地的，修改后的文件又不提交到远程仓库，怎么办呢？","text":"有的时候项目的配置文件和测试环境的不一样，本地开发时需要将配置改为本地的，修改后的文件又不提交到远程仓库，怎么办呢？ 可以使用如下命令忽略已经修改后但是不提交的文件 1git update-index --assume-unchanged [file-path] 重新恢复提交的命令 1git update-index --no-assume-unchanged [file-path]","categories":[{"name":"Git","slug":"Git","permalink":"https://blog.liuchaoming.cn/categories/Git/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://blog.liuchaoming.cn/tags/Git/"}]},{"title":"Liunx终端关闭后shell脚本继续运行","slug":"Liunx终端关闭后shell脚本继续运行","date":"2019-09-12T22:22:11.737Z","updated":"2019-09-13T06:29:54.730Z","comments":true,"path":"2019/09/13/Liunx终端关闭后shell脚本继续运行/","link":"","permalink":"https://blog.liuchaoming.cn/2019/09/13/Liunx终端关闭后shell脚本继续运行/","excerpt":"一直执行的shell脚本，在终端关闭后就会退出，怎么解决？","text":"一直执行的shell脚本，在终端关闭后就会退出，怎么解决？ 比如运行xxx.sh 1bash xxx.sh 按下ctrl-z中断脚本运行，此时系统提示： 12^Z[1]+ Stopped bash xxx.sh 意思是编号为1的任务挂起了，[1]就是任务的编号，里面的数字也可能是2，3，4… 输入命令： 1bg 1 这个命令将1号任务切换到后台执行 输入命令： 1disown -h %1 这个命令的是将1号任务从当前shell的任务列表中移除，并且忽略HUP信号(Liunx的中断信号)，这样，即使当前Shell结束了，这个任务也不会被结束，而是继续留在后台执行。","categories":[],"tags":[{"name":"Liunx","slug":"Liunx","permalink":"https://blog.liuchaoming.cn/tags/Liunx/"}]},{"title":"Docker拉取镜像出错","slug":"Docker拉取镜像出错","date":"2019-09-12T13:54:41.000Z","updated":"2019-09-21T03:55:26.837Z","comments":true,"path":"2019/09/12/Docker拉取镜像出错/","link":"","permalink":"https://blog.liuchaoming.cn/2019/09/12/Docker拉取镜像出错/","excerpt":"docker pull镜像的时候出错 1ERROR: Get https://registry-1.docker.io/v2/: dial tcp: lookup registry-1.docker.io on 8.8.8.8:53: too many redirects","text":"docker pull镜像的时候出错 1ERROR: Get https://registry-1.docker.io/v2/: dial tcp: lookup registry-1.docker.io on 8.8.8.8:53: too many redirects 解决方法执行以下命令1dig @114.114.114.114 registry-1.docker.io 执行后结果如下： 12345678910111213141516171819202122232425262728293031323334353637383940414243; &lt;&lt;&gt;&gt; DiG 9.9.4-RedHat-9.9.4-61.el7 &lt;&lt;&gt;&gt; @114.114.114.114 registry-1.docker.io; (1 server found);; global options: +cmd;; Got answer:;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 52963;; flags: qr rd ra; QUERY: 1, ANSWER: 8, AUTHORITY: 4, ADDITIONAL: 9;; OPT PSEUDOSECTION:; EDNS: version: 0, flags:; udp: 4096;; QUESTION SECTION:;registry-1.docker.io. IN A;; ANSWER SECTION:registry-1.docker.io. 300 IN A 3.210.179.11registry-1.docker.io. 300 IN A 52.55.198.220registry-1.docker.io. 300 IN A 52.70.175.131registry-1.docker.io. 300 IN A 54.175.43.85registry-1.docker.io. 300 IN A 54.210.105.17registry-1.docker.io. 300 IN A 100.24.246.89registry-1.docker.io. 300 IN A 54.88.231.116registry-1.docker.io. 300 IN A 52.87.94.70;; AUTHORITY SECTION:docker.io. 61407 IN NS ns-1168.awsdns-18.org.docker.io. 61407 IN NS ns-421.awsdns-52.com.docker.io. 61407 IN NS ns-1827.awsdns-36.co.uk.docker.io. 61407 IN NS ns-513.awsdns-00.net.;; ADDITIONAL SECTION:ns-1827.awsdns-36.co.uk. 57947 IN A 205.251.199.35ns-1827.awsdns-36.co.uk. 57273 IN AAAA 2600:9000:5307:2300::1ns-1168.awsdns-18.org. 47450 IN A 205.251.196.144ns-1168.awsdns-18.org. 57090 IN AAAA 2600:9000:5304:9000::1ns-421.awsdns-52.com. 143703 IN A 205.251.193.165ns-421.awsdns-52.com. 57067 IN AAAA 2600:9000:5301:a500::1ns-513.awsdns-00.net. 45649 IN A 205.251.194.1ns-513.awsdns-00.net. 45650 IN AAAA 2600:9000:5302:100::1;; Query time: 5 msec;; SERVER: 114.114.114.114#53(114.114.114.114);; WHEN: Thu Sep 12 21:50:15 CST 2019;; MSG SIZE rcvd: 493 修改 /etc/hosts文件，强制docker.io域名解析到可用IP，添加13.210.179.11 registry-1.docker.io","categories":[{"name":"Docker","slug":"Docker","permalink":"https://blog.liuchaoming.cn/categories/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://blog.liuchaoming.cn/tags/Docker/"}]},{"title":"Liunx记录登录用户和操作记录","slug":"Liunx记录登录用户和操作记录","date":"2019-09-11T15:15:37.000Z","updated":"2019-09-21T03:56:29.792Z","comments":true,"path":"2019/09/11/Liunx记录登录用户和操作记录/","link":"","permalink":"https://blog.liuchaoming.cn/2019/09/11/Liunx记录登录用户和操作记录/","excerpt":"","text":"通过在/etc/profile里面加入以下代码就可以实现记录登陆后的IP地址和某用户名所操作的历史记录 123456789101112131415161718192021PS1=\"`whoami`@`hostname`:\"'[$PWD]'historyUSER_IP=`who -u am i 2&gt;/dev/null| awk '&#123;print $NF&#125;'|sed -e 's/[()]//g'`if [ \"$USER_IP\" = \"\" ]thenUSER_IP=`hostname`fiif [ ! -d /tmp/dbasky ]thenmkdir /tmp/dbaskychmod 777 /tmp/dbaskyfiif [ ! -d /tmp/dbasky/$&#123;LOGNAME&#125; ]thenmkdir /tmp/dbasky/$&#123;LOGNAME&#125;chmod 300 /tmp/dbasky/$&#123;LOGNAME&#125;fiexport HISTSIZE=4096DT=`date \"+%Y-%m-%d_%H:%M:%S\"`export HISTFILE=\"/tmp/dbasky/$&#123;LOGNAME&#125;/$&#123;USER_IP&#125; dbasky.$DT\"chmod 600 /tmp/dbasky/$&#123;LOGNAME&#125;/*dbasky* 2&gt;/dev/null 别忘记执行下面命令使脚本生效 1source /etc/profile /tmp/dbasky/root目录下查看记录信息","categories":[{"name":"Liunx","slug":"Liunx","permalink":"https://blog.liuchaoming.cn/categories/Liunx/"}],"tags":[{"name":"Liunx","slug":"Liunx","permalink":"https://blog.liuchaoming.cn/tags/Liunx/"}]},{"title":"Centos7上安装Docker","slug":"Centos7上安装Docker","date":"2019-09-10T13:13:55.000Z","updated":"2019-09-21T06:22:10.656Z","comments":true,"path":"2019/09/10/Centos7上安装Docker/","link":"","permalink":"https://blog.liuchaoming.cn/2019/09/10/Centos7上安装Docker/","excerpt":"","text":"通过yum源安装docker1yum -y install docker 启动docker1systemctl start docker 开机自启1sudo systemctl enable docker","categories":[{"name":"Docker","slug":"Docker","permalink":"https://blog.liuchaoming.cn/categories/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://blog.liuchaoming.cn/tags/Docker/"}]},{"title":"Docker运行mysql挂载数据卷权限问题","slug":"Docker运行mysql挂载数据卷权限问题","date":"2019-09-08T04:04:49.000Z","updated":"2019-09-21T03:55:47.548Z","comments":true,"path":"2019/09/08/Docker运行mysql挂载数据卷权限问题/","link":"","permalink":"https://blog.liuchaoming.cn/2019/09/08/Docker运行mysql挂载数据卷权限问题/","excerpt":"使用docker-compose运行mysql容器报错，没有执行权限的问题","text":"使用docker-compose运行mysql容器报错，没有执行权限的问题 docker-compose.yml 内容如下所示1234567891011121314version: &quot;2&quot;services: mysql: container_name: mysql image: mysql:5.5.60 restart: always ports: - &quot;3306:3306&quot; volumes: - ./mysql/data:/var/lib/mysql environment: MYSQL_ROOT_PASSWORD: &quot;123456&quot; 报错信息1chown: cannot read directory '/var/lib/mysql/': Permission denied 解决方法该原因为centOs7默认开启selinux安全模块,需要临时关闭该安全模块。 12临时关闭selinux：su -c &quot;setenforce 0&quot;重新开启selinux：su -c &quot;setenforce 1&quot; 或者添加目录到白名单，添加selinux规则，将要挂载的目录添加到白名单： 1chcon -Rt svirt_sandbox_file_t ./mysql/data","categories":[{"name":"Docker","slug":"Docker","permalink":"https://blog.liuchaoming.cn/categories/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://blog.liuchaoming.cn/tags/Docker/"},{"name":"Mysql","slug":"Mysql","permalink":"https://blog.liuchaoming.cn/tags/Mysql/"}]},{"title":"git push到GitHub的时候遇到! [rejected] master -> master (non-fast-forward)的问题","slug":"git-push到GitHub的时候遇到的问题","date":"2019-09-05T13:38:03.000Z","updated":"2019-09-21T03:56:09.150Z","comments":true,"path":"2019/09/05/git-push到GitHub的时候遇到的问题/","link":"","permalink":"https://blog.liuchaoming.cn/2019/09/05/git-push到GitHub的时候遇到的问题/","excerpt":"git push到GitHub的时候遇到! [rejected] master -&gt; master (non-fast-forward)的问题","text":"git push到GitHub的时候遇到! [rejected] master -&gt; master (non-fast-forward)的问题 出现错误的原因1、在manage文件夹里打开git，输入git init初始化本地仓库，GitHub创建远程仓库manage 2、以下命令关联本地和远程仓库，xxx为github厂库用户名 1git remote add origin git@github.com:xxx/manage.git 3、本地已经有项目代码了在add和commit之后，想要push到远程仓库，报错： 123456 ! [rejected] master -&gt; master (non-fast-forward)error: failed to push some refs to &apos;git@github.com:xxx/spring-study.git&apos;hint: Updates were rejected because the tip of your current branch is behindhint: its remote counterpart. Integrate the remote changes (e.g.hint: &apos;git pull ...&apos;) before pushing again.hint: See the &apos;Note about fast-forwards&apos; in &apos;git push --help&apos; for details. 解决方式1、git pull origin master –allow-unrelated-histories //把远程仓库和本地同步，消除差异 2、重新add和commit相应文件 3、执行命令 1git push origin master 4、此时就能push成功了","categories":[{"name":"Git","slug":"Git","permalink":"https://blog.liuchaoming.cn/categories/Git/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://blog.liuchaoming.cn/tags/Git/"},{"name":"GitHub","slug":"GitHub","permalink":"https://blog.liuchaoming.cn/tags/GitHub/"}]},{"title":"关于java的垃圾收集器","slug":"关于java的垃圾收集器","date":"2019-09-04T13:00:20.000Z","updated":"2019-09-21T04:41:55.127Z","comments":true,"path":"2019/09/04/关于java的垃圾收集器/","link":"","permalink":"https://blog.liuchaoming.cn/2019/09/04/关于java的垃圾收集器/","excerpt":"虽然对各个收集器进行比较，但并非要挑选出一个最好的收集器。因为知道现在为止还没有所谓最好的垃圾收集器出现，也更加没有万能的垃圾收集器，而是根据具体应用场景选择适合自己的垃圾收集器。如果有一种任何场景下都适用的完美收集器存在，那么HotSpot虚拟机就不会实现那么多不同的垃圾收集器了","text":"虽然对各个收集器进行比较，但并非要挑选出一个最好的收集器。因为知道现在为止还没有所谓最好的垃圾收集器出现，也更加没有万能的垃圾收集器，而是根据具体应用场景选择适合自己的垃圾收集器。如果有一种任何场景下都适用的完美收集器存在，那么HotSpot虚拟机就不会实现那么多不同的垃圾收集器了 Serial收集器 Serial（串行）收集器收集器是最基本、历史最悠久的垃圾收集器了。看名字就知道这个收集器是一个单线程收集器了。它的 “单线程” 的意义不仅仅意味着它只会使用一条垃圾收集线程去完成垃圾收集工作，更重要的是它在进行垃圾收集工作的时候必须暂停其他所有的工作线程（ “Stop The World” ），直到它收集结束。","categories":[{"name":"Java","slug":"Java","permalink":"https://blog.liuchaoming.cn/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://blog.liuchaoming.cn/tags/Java/"}]},{"title":"Java8的Lambda表达式","slug":"Java8的Lambda表达式-上","date":"2019-08-30T13:46:34.000Z","updated":"2019-09-21T03:56:18.914Z","comments":true,"path":"2019/08/30/Java8的Lambda表达式-上/","link":"","permalink":"https://blog.liuchaoming.cn/2019/08/30/Java8的Lambda表达式-上/","excerpt":"Java 8版本是现在Java最流行的一个版本。主要改进Java在面向对象的基础上对函数式编程的支持。本文将展示Lambda的基本语法。","text":"Java 8版本是现在Java最流行的一个版本。主要改进Java在面向对象的基础上对函数式编程的支持。本文将展示Lambda的基本语法。 为什么使用Lambda表达式我们使用Java的集合经常会定义比较器来进行集合排序。比如要按照字符串长度对字符进行排序，实现一个自定义的Comparator对象并传递给方法进行排序，如： 12345678class LengthComparator implements Comparator&lt;String&gt; &#123; public int compare(String firstStr, String secondStr) &#123; return Integer.compare(firstStr.length(), secondStr.length()); &#125;&#125;Arrays.sort(strings, new LengthComparator()); 编写这一段用于比较的代码片段，封装在自定义的Comparator里。Arrays.sort方法会在适当时机就会调用此代码片段，对strings数组进行排序。那么，这个适当时机，是什么时候呢？它可能是某个按钮被点击时，也可能是某个新线程被启动时，如： 12345678910class MyRunner implements Runnable &#123; public void run() &#123; for(int i = 0; i &lt; 1000; i++) &#123; System.our.println(\"do work\"); &#125; &#125; ...&#125;new Thread(new MyRunner()).start(); 把一段代码块传递 - 线程池，排序方法。希望在适当时机需要时，调用这段代码来进行相关工作或排序。 在java8以前，想要传递代码块很不容易。我们只能把代码块写在一个特殊的类里, 或者使用匿名内部类的方式，实例化一个类对象来传递这段代码。 Lambda的语法对于字符串排序，需要明确两个问题 处理传入的参数类型是什么？是什么数据类型？ 使用什么代码片段来进行处理？ 于是，Lambda的表达式可以: 1(String str1, String str2) -&gt; Integer.compare(str1.length(), str2.length()); 如果可以推断Lambda的参数类型，可以省略类型，如： 1Comparator&lt;String&gt; com = (str1, str2) -&gt; Integer.compare(str1.length(), str2.length());","categories":[{"name":"Java","slug":"Java","permalink":"https://blog.liuchaoming.cn/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://blog.liuchaoming.cn/tags/Java/"}]},{"title":"Mysql导入导出命令详解","slug":"Mysql导入导出命令详解","date":"2019-08-13T12:10:29.000Z","updated":"2019-09-13T04:57:33.615Z","comments":true,"path":"2019/08/13/Mysql导入导出命令详解/","link":"","permalink":"https://blog.liuchaoming.cn/2019/08/13/Mysql导入导出命令详解/","excerpt":"Mysql导入导出数据库经常使用，记录一下以后方便查找","text":"Mysql导入导出数据库经常使用，记录一下以后方便查找 导出数据和表结构 使用mysqldump可以加上–default-character-set=utf8 12345mysqldump -u用户名 -p密码 --default-character-set=utf8 数据库名 &gt; 数据库名.sqlmysqldump -uroot -p123456 --default-character-set=utf8 test &gt; test.sqlmysqldump -uroot -p test &gt; test.sql 只导出表结构123mysqldump -u用户名 -p密码 -d 数据库名 &gt; 数据库名.sqlmysqldump -uroot -p123456 -d test &gt; test.sql 导入数据库使用mysql命令导入123mysql -u用户名 -p 数据库名 &lt; 数据库名.sqlmysql -uroot -p123456 test &lt; test.sql 使用source命令导入12use test; # 使用已经创建的数据库source /home/test/test.sql # 导入备份的sql文件 导出远程数据库123mysqldump -h远程服务器ip地址 -P端口号 -u用户名 -p密码 --default-character-set=utf8 test &gt; /home/test/test.sqlmysqldump -h192.168.22.11 –P3306 -uroot -ppassword --default-character-set=utf8 test &gt; /home/test/test.sql","categories":[],"tags":[{"name":"Mysql","slug":"Mysql","permalink":"https://blog.liuchaoming.cn/tags/Mysql/"}]},{"title":"Mysql数据库设计规范","slug":"Mysql数据库设计规范","date":"2019-08-10T15:03:34.000Z","updated":"2019-09-22T02:41:37.422Z","comments":true,"path":"2019/08/10/Mysql数据库设计规范/","link":"","permalink":"https://blog.liuchaoming.cn/2019/08/10/Mysql数据库设计规范/","excerpt":"一般使用Mysql数据比较多，但是有点小伙伴很少考虑Mysql设计上的细节问题，像SQL语句的规范、索引上的规范等等，本文经过整理后得到一些常用的Mysql数据库设计规范。","text":"一般使用Mysql数据比较多，但是有点小伙伴很少考虑Mysql设计上的细节问题，像SQL语句的规范、索引上的规范等等，本文经过整理后得到一些常用的Mysql数据库设计规范。 Mysql命令规范1234- 所有数据库表命名都用小写字母、并用下换线分割- 所有数据库表名尽量不要使用Mysql关键字命名、能看到名称大概了解表是做什么的- 临时表以tmp_为前缀、日期后缀区分，备份表以bak_为前缀、日期后缀- 相同的数据字段，在所有表中的列明和类型尽量保持一致 基本设计规范1234567891011- 大部分情况尽量使用InnoDB引擎，InnoDB支持事务、行级锁、性能更好- 数据库尽量使用utf8mb4的字符集，兼容性好，避免乱码和索引创建失败的问题- 表和字段都尽量加上注释，方便以后维护- 尽量不要使用存储过程、视图、触发器、Event。可以减少数据库资源的占用、将计算转移到服务层- 单表的数据量尽量控制在500万以内，数据量过大影响Mysql性能和维护，更多的数据可以对数据库进行分库分表拆分，控制单表的数据量- 尽量不要使用Mysql的分区功能，分区是物理上多个文件，逻辑上一个文件，查询效率很低。可以使用中间件mycat、sharding-jdbc等进行物理分区- 尽量减少表的宽度、数据冷热数据进行分离、保证每个表都有主键 - Mysql列数限制在为4096列，每一行数据不超过65535字节；宽度越大、加载的内存就越大，IO消耗也就越大 - 经常用的数据放在一起，不常用的数据分离出去，可以极大提高效率 - 主键可以更好的利用索引，提高查询效率- 表中尽量不用外键，通过程序来维护，外键导致表与表之间耦合，涉及相关的表，十分影响性能且容易造成死锁 字段涉及规范1234567891011121314151617- 优先选择符合业务最小的存储类型，节省数据空间减少IO消耗- 字段定义使用Not Null，可以提供一个默认值 - null值索引很难优化，null值更占用空间，需要额外空间标识 - null值操作只能采用is null或is not null - 不能采用=、in、&lt;、&lt;&gt;、not in、！=操作符，不方便操作，where name != &apos;abc&apos;, 不会查询出name为null的数据- 尽量不使用Text、Blob类型 - Mysql使用Text、Blob类型就不使用内存临时表而使用磁盘临时空间、性能差浪费磁盘和内存空间。 - 降低数据库内存命中率 - 可以单独建立扩展表使用- 尽量不使用Enum、用Tinyint - 修改Enum值时，需要通过alter修改表 - order by的操作效率低- 尽量不要使用小数，尤其涉及金钱等精度要求较高的类型 - 最好使用整数，小数存储有精度的误差，导致金额对不上- 时间尽量使用Timestamp或者Datetime类型存储时间，不要使用String类型 - 使用String无法使用日期函数进行比较比较 - 用String会占用更多的空间 索引设计规范1234567- 表的索引不要太多，尽量5个以下，索引增加查询效率同时也会降低插入和更新的效率 - 索引太多会影响Mysql优化器，优化器消耗时间增加，反而降低查询到的性能- 更新频繁的列、或者列值区分度不高的列(如：性别，只有男、女、未知)不要加索引- 联合索引，把区分度高的放在左侧，尽量遵循最左索引原则 - 区分度高的列放在最左侧 - 查询频繁的列放在最左侧 - 字段长度小的放在最左侧 SQL语句规范1234567891011121314151617- 尽量不要使属性隐式转换，隐式转换使索引失效 - SELECT name FROM project WHERE id = `&apos;1000&apos;`; id为整型，用`1000`代替- 程序中使用预编译语句操作数据库，减少SQL编译时间同时防止SQL注入- insert语句尽量包含字段 - 如：INSERT INTO test values(&apos;1&apos;, &apos;abc&apos;);应该INSERT INTO test(id, name) values(&apos;1&apos;, &apos;abc&apos;)- 尽量不要使用%开头的模糊查询 - not、!=、&lt;&gt;、not in、not like以及%开头等，会是查询不走索引而全变扫描- 联合索引只能有一列进行范围查询 - a1,a2,a3联合索引，a1范围查询，a2，a3列不会走索引，可以把a1放在最后- Where语句后的字段尽量不要使用函数或表达式，否则不会走索引 - SELECT id FROM t WHERE num/2=100，这将导致引擎放弃使用索引而进行全表扫描，可改为：SELECT id FROM t WHERE num=100*2 - SELECT id FROM t WHERE substring(name,1,3)=&apos;abc&apos;--name以abc开头的id，应改为:SELECT id FROM t WHERE name LIKE &apos;abc%&apos; - SELECT id FROM t WHERE datediff(day,createdate,&apos;2005-11-30&apos;)=0--&apos;2015-11-30&apos;生成的id，应改为:SELECT id FROM t WHERE createdate&gt;=&apos;2015-11-30&apos; AND createdate&lt;&apos;2015-12-1&apos;- 大表不要使用子查询，不使用JOIN查询- 避免JOIN关联太多表- OR条件可以换成IN查询- 尽量减少与数据库交互次数","categories":[{"name":"Mysql","slug":"Mysql","permalink":"https://blog.liuchaoming.cn/categories/Mysql/"}],"tags":[{"name":"Mysql","slug":"Mysql","permalink":"https://blog.liuchaoming.cn/tags/Mysql/"}]},{"title":"Docker安装后报Cannot connect to the docker daemon at ...","slug":"Docker使用报错","date":"2019-07-31T15:03:34.000Z","updated":"2019-09-21T04:42:30.828Z","comments":true,"path":"2019/07/31/Docker使用报错/","link":"","permalink":"https://blog.liuchaoming.cn/2019/07/31/Docker使用报错/","excerpt":"Docker安装后报错：Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?","text":"Docker安装后报错：Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running? 解决方式执行以下命令123systemctl daemon-reloadsudo service docker restartsudo service docker status (should see active (running))","categories":[{"name":"Docker","slug":"Docker","permalink":"https://blog.liuchaoming.cn/categories/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://blog.liuchaoming.cn/tags/Docker/"}]},{"title":"About Blog","slug":"Blog","date":"2019-07-31T15:03:34.000Z","updated":"2019-09-26T11:17:39.328Z","comments":true,"path":"2019/07/31/Blog/","link":"","permalink":"https://blog.liuchaoming.cn/2019/07/31/Blog/","excerpt":"Welcome to this Blog!","text":"Welcome to this Blog! Quick StartCreate a new post1hexo new \"My New Post\" More info: Writing Run server1hexo server More info: Server Generate static files1hexo generate More info: Generating Deploy to remote sites1hexo deploy More info: Deployment Clean1hexo clean","categories":[{"name":"Hexo","slug":"Hexo","permalink":"https://blog.liuchaoming.cn/categories/Hexo/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://blog.liuchaoming.cn/tags/Hexo/"}]}]}