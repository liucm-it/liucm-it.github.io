{"meta":{"title":"编程学习之路","subtitle":"一个博客、一个记录、一份笔记，温故而知新！","description":"Kming 的个人博客；学习 Java、WEB前端、中间件、容器、CI/CD；路漫漫其修远兮，吾将上下而求索。一入 IT 学无止境，一个博客、一个记录、一份笔记，温故而知新！","author":"Kming Liu","url":"https://www.kming6.com","root":"/"},"pages":[{"title":"","date":"2020-06-06T07:48:46.192Z","updated":"2020-06-06T07:48:46.192Z","comments":true,"path":"404.html","permalink":"https://www.kming6.com/404.html","excerpt":"","text":"var QZONE = window.QZONE || {}; function imagezoom(imgobj, box_w, box_h) { var src_w = imgobj.width; var src_h = imgobj.height; var r1 = src_w / src_h, r2 = box_w / box_h; var dst_w, dst_h; if (r1 > r2) { dst_w = box_w; dst_h = Math.round(dst_w / src_w * src_h); } else { if (r1 < r2) { dst_h = box_h; dst_w = Math.round(dst_h / src_h * src_w); } else { dst_w = box_w; dst_h = box_h; } } imgobj.style.marginLeft = (box_w - dst_w) / 2 + \"px\"; imgobj.style.marginTop = (box_h - dst_h) / 2 + \"px\"; imgobj.style.width = dst_w + \"px\"; imgobj.style.height = dst_h + \"px\"; imgobj.style.opacity = 1; } (function(_w, _d) { var ha = _d.head || _d.getElementsByTagName(\"head\")[0]; var $scope = {}; var current; var tmnow; var chId; var homePageUrl, homePageName; var scs = document.getElementsByTagName(\"script\"); if (location.href.indexOf(\"fm.qq.com\") > -1 || location.href.indexOf(\"fm.qzone.qq.com\") > -1) { homePageName = \"\\u8fd4\\u56de\\u4f01\\u9e45FM\"; homePageUrl = \"http://fm.qq.com\"; } else { if (location.href.indexOf(\"qzone.qq.com\") > -1) { homePageName = \"\\u8fd4\\u56de\\u6211\\u7684\\u7a7a\\u95f4\"; homePageUrl = \"http://qzone.qq.com\"; } else { homePageName = \"\\u8fd4\\u56de\\u817e\\u8baf\\u7f51\"; homePageUrl = \"http://www.qq.com\"; } } for (var i = 0;i < scs.length;i++) { if (scs[i].src.indexOf(\"404/search_children.js\") > -1) { if (scs[i].getAttribute(\"homePageUrl\")) { homePageUrl = scs[i].getAttribute(\"homePageUrl\"); } if (scs[i].getAttribute(\"homePageName\")) { homePageName = scs[i].getAttribute(\"homePageName\"); } break; } } $scope.rettext = homePageName; $scope.retlink = homePageUrl; function getData(srcUrl, callback) { var sc = _d.createElement(\"script\"); function orc() { if (sc.readyState === \"loaded\") { setTimeout(function() { callback && callback(); }, 0); } } if (sc.addEventListener) { if (callback) { sc.addEventListener(\"load\", callback, false); } } else { sc.attachEvent(\"onreadystatechange\", orc); } ha && ha.appendChild(sc); sc.src = srcUrl; } function resolveData(d) { var tid, len, ddata = [], tdata; if (\"object\" == typeof d && (d.data && (len = d.data.length))) { for (var i = 0;i < len;i++) { var expire = d.data[i].expire; d.data[i]._id = new Date * Math.random() * Math.random() * 1E7; if (expire && tmnow * 1E3 < Date.parse(expire.replace(/\\s[\\s\\S]*$/, \"\").replace(/\\-/g, \"/\"))) { var _c = d.data[i].city, _p = d.data[i].province; if (_c && city) { if ((\"_\" + _c + \"_\").indexOf(\"_\" + city + \"_\") > -1) { ddata.push(d.data[i]); continue; } } if (_p && province) { if ((\"_\" + _p + \"_\").indexOf(\"_\" + province + \"_\") > -1) { ddata.push(d.data[i]); } } } } tid = Math.floor(Math.random() * (ddata.length || len)); tdata = (ddata.length ? ddata : d.data)[chId = tid]; if (_w.foundjsondata) { tdata.ta = tdata.sex.indexOf(\"\\u5973\") > -1 ? \"\\u5979\" : \"\\u4ed6\"; tdata.name = \"\\u201c7\\u00b718\\u7279\\u5927\\u62d0\\u5356\\u5a74\\u513f\\u6848\\u201d\\u544a\\u7834\\uff0c\\u88ab\\u89e3\\u6551\\u768415\\u540d\\u5b69\\u5b50\\u4e2d\\uff0c2\\u4eba\\u7531\\u4eb2\\u751f\\u7236\\u6bcd\\u9886\\u56de\\uff0c\\u4ecd\\u670913\\u540d\\u5b69\\u5b50\\u672a\\u627e\\u5230\\u4eb2\\u751f\\u7236\\u6bcd\\uff0c\\u88ab\\u5b89\\u7f6e\\u5728\\u60e0\\u5dde\\u5e02\\u793e\\u4f1a\\u798f\\u5229\\u9662\\uff0c\" + tdata.ta + \"\\u662f\\u5176\\u4e2d\\u4e4b\\u4e00\\u3002\"; tdata.url = tdata.url.replace(/#p=(\\d{1,2})/, function(a, n) { return \"#p=\" + (+n + 1); }); return format(tmpl2, tdata); } if (!tdata.ext1) { tdata.ext1 = \"\\u4f46\\u6211\\u4eec\\u53ef\\u4ee5\\u4e00\\u8d77\\u5bfb\\u627e\\u5931\\u8e2a\\u5b9d\\u8d1d\"; } return tdata; } } function setTopData(tdata) { current = tdata; $scope.topname = tdata.name; $scope.topgender = tdata.sex; $scope.topbirth = tdata.birth_time; $scope.toplostdate = tdata.lost_time; $scope.toplostplace = tdata.lost_place; $scope.toplostdesc = tdata.child_feature; $scope.toplink = tdata.url; $scope.topimg = tdata.child_pic; $scope.topid = tdata._id; document.body.innerHTML = template(\"body\", $scope); } function init(data) { tmnow = data.tm_now * 1E3; var tdata = resolveData(jsondata); $scope.whichin = 0; jsondata.data.splice(chId, 1); $scope.otherdata = [tdata].concat(jsondata.data.slice(0, 5)); setTopData(tdata); } var timeout; window._Callback = function(d) { clearTimeout(timeout); init(d); }; timeout = setTimeout(function() { _Callback({tm_now:(new Date).getTime() / 1E3}); }, 2E3); _w.share = function(target) { var summary = [\"\\u80cc\\u666f\\uff1a\", current.name, \"\\uff0c\\u6027\\u522b\\uff1a\", current.sex, \"\\uff0c\\u51fa\\u751f\\u65f6\\u95f4\\uff1a\", current.birth_time, \"\\uff0c\\u5931\\u8e2a\\u65f6\\u95f4\\uff1a\", current.lost_time, \"\\uff0c\\u7279\\u5f81\\u63cf\\u8ff0\\uff1a\", current.child_feature].join(\"\"); if (summary) { summary = \"#\\u5bfb\\u627e\\u5931\\u8e2a\\u7684\\u5b9d\\u8d1d#\" + summary; } var stitle = \"\\u5931\\u8e2a\\u7684\\u5b9d\\u8d1d\\u8be6\\u60c5\"; var desc = \"\\u5931\\u8e2a\\u7684\\u5b9d\\u8d1d\\u8981\\u56de\\u5bb6\\uff0c\\u5feb\\u6765\\u53c2\\u4e0e\\u7231\\u5fc3\\u7684\\u4f20\\u9012\\u5427\\uff01\"; var encode = encodeURIComponent; var opts = {\"surl\":\"http://qzone.qq.com/gy/404/\" + current.id + \"/lostchild.html\", \"site\":\"QQ\\u7a7a\\u95f4\", \"summary\":summary || \"#\\u5b9d\\u8d1d\\u56de\\u5bb6#\\u817e\\u8baf\\u5fd7\\u613f\\u8005\\u7528\\u6280\\u672f\\u70b9\\u4eae\\u516c\\u76ca\\uff0c\\u8ba9\\u6211\\u4eec\\u4e00\\u8d77\\u5bfb\\u627e\\u8d70\\u5931\\u7684\\u513f\\u7ae5\\u5427\\uff01\", \"stitle\":stitle, \"pics\":current.child_pic, \"desc\":desc, \"origin_url\":current.url}; var surl = opts.surl || \"http://www.qq.com/404/\", summary = opts.summary || \"\\u8fd9\\u4e2a\\u662f\\u5206\\u4eab\\u7684\\u5185\\u5bb9\", stitle = opts.stitle || \"\\u8fd9\\u4e2a\\u662f\\u5206\\u4eab\\u7684\\u6807\\u9898\", pics = opts.pics || \"http://qzonestyle.gtimg.cn/qzone_v6/act/img/20120422_qzone_7_years/pop_up/icon-pop-seven-years.png\", site = opts.site || \"\\u8fd9\\u4e2a\\u662f\\u5206\\u4eab\\u94fe\\u63a5\\u7684\\u6587\\u5b57\", desc = opts.desc || \"\\u5931\\u8e2a\\u7684\\u5b9d\\u8d1d\\u8981\\u56de\\u5bb6\\uff0c\\u5feb\\u6765\\u53c2\\u4e0e\\u7231\\u5fc3\\u7684\\u4f20\\u9012\\u5427\\uff01\", origin_url = opts.origin_url || \"http://www.qq.com/404/\"; var shareList = {weibo:{method:function(evt) { var w = \"http://v.t.qq.com/share/share.php\", q = [\"?site=\", encode(surl + \"#via=share_t_weib\"), \"&title=\", encode(summary), \"&pic=\", encode(pics), \"&url=\", encode(surl)].join(\"\"), p = [w, q].join(\"\"); openit(p, \"weibo\", \"width=700, height=680, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no\"); }}, qzone:{method:function(evt) { var buff = [], ps = {url:surl + \"#via=404-qzoneshare\", desc:desc || \"\\u5931\\u8e2a\\u7684\\u5b9d\\u8d1d\\u8981\\u56de\\u5bb6\\uff0c\\u5feb\\u6765\\u53c2\\u4e0e\\u7231\\u5fc3\\u7684\\u4f20\\u9012\\u5427\\uff01\", summary:summary, title:stitle, pics:pics, site:site}; for (var k in ps) { buff.push(k + \"=\" + encode(ps[k] || \"\")); } var w = \"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?\" + buff.join(\"&\"), q = [\"#via=share_t_qzone\", \"&title=\", encode(summary), \"&pic=\", encode(pics), \"&url=\", encode(surl)].join(\"\"), p = [w, q].join(\"\"); openit(p, \"qzone\", \"width=700, height=680, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no\"); }}, sina:{method:function() { var w = \"http://v.t.sina.com.cn/share/share.php\", q = [\"?url=\", encode(surl + \"#via=share_x_weib\"), \"&title=\", encode(summary), \"&source=\", \"&sourceUrl=\", surl, \"&content=utf-8\", \"&pic=\", encode(pics)].join(\"\"), p = [w, q].join(\"\"); openit(p, \"sina\", \"toolbar=0,status=0,resizable=1,width=440,height=430\"); }}, kaixin:{method:function() { var n = \"http://www.kaixin001.com/repaste/bshare.php?rurl=\" + encode(surl + \"#via=share_kaixin\") + \"&rcontent=&rtitle=\" + encode(summary); openit(n, \"kaixin\", \"toolbar=0,status=0,resizable=1,width=600,height=360\"); }}, renren:{method:function() { var n = \"http://www.connect.renren.com/share/sharer?title=\" + encode(summary) + \"&url=\" + encode(surl + \"#via=share_renren\"), p = window.open(n, \"rr\", \"toolbar=0,status=0,resizable=1,width=510,height=300\"); if (p) { p.focus(); } }}, weixin:{method:function() { var n = \"http://qzone.qq.com/gy/404/page/qrcode.html?url=\" + encode(origin_url + \"#via=share_weixin\"), p = window.open(n, \"rr\", \"toolbar=0,status=0,resizable=1,width=620,height=430\"); if (p) { p.focus(); } }}}; var openit = function(u, n, p) { function o() { var z; if (!(z = window.open(u, n, p))) { location.href = u; } else { z.focus(); } } o(); }; shareList[target] && shareList[target].method(); }; _w.toThis = function(id) { for (var i = 0;i < $scope.otherdata.length;i++) { if ($scope.otherdata[i]._id == id) { setTopData($scope.otherdata[i]); break; } } return false; }; var meta = document.createElement(\"meta\"); meta.name = \"viewport\"; meta.content = \"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\"; ha.appendChild(meta); (function registerStyle() { var link = document.createElement(\"link\"); link.rel = \"stylesheet\"; link.type = \"text/css\"; link.href = \"https://qzone.qq.com/gy/404/style/404style.css\"; ha.appendChild(link); })(); (function initStat() { var qqDomainNameRE = /\\.qq\\.com$/i, qzoneDomainNameRE = /\\bqzone\\.qq\\.com$/i, qzsDomainNameRE = /\\bqzonestyle\\.gtimg\\.cn$/i; function cb() { var url = location.host; var src = \"\"; if (qzoneDomainNameRE.test(url)) { src = \"new404.qzone\"; } else { if (qqDomainNameRE.test(url)) { src = \"new404.qq\"; } else { if (qzsDomainNameRE.test(url)) { src = \"new404.qzonestyle\"; } else { src = url.replace(\".\", \"_\"); } } } _w.TCISD && (_w.TCISD.pv && _w.TCISD.pv(\"hat.qzone.qq.com\", \"/gy/lostchild/\" + src)); } getData(\"https://qzonestyle.gtimg.cn/ac/qzfl/stat.js\", cb); })(); })(window, document); !function() { function a(a, b) { return(/string|function/.test(typeof b) ? h : g)(a, b); } function b(a, c) { return \"string\" != typeof a && (c = typeof a, \"number\" === c ? a += \"\" : a = \"function\" === c ? b(a.call(a)) : \"\"), a; } function c(a) { return l[a]; } function d(a) { return b(a).replace(/&(?![\\w#]+;)|[\"']/g, c); } function e(a, b) { if (m(a)) { for (var c = 0, d = a.length;d > c;c++) { b.call(a, a[c], c, a); } } else { for (c in a) { b.call(a, a[c], c); } } } function f(a, b) { var c = /(\\/)[^/]+\\1\\.\\.\\1/, d = (\"./\" + a).replace(/[^/]+$/, \"\"), e = d + b; for (e = e.replace(/\\/\\.\\//g, \"/\");e.match(c);) { e = e.replace(c, \"/\"); } return e; } function g(b, c) { var d = a.get(b) || i({filename:b, name:\"Render Error\", message:\"Template not found\"}); return c ? d(c) : d; } function h(a, b) { if (\"string\" == typeof b) { var c = b; b = function() { return new k(c); }; } var d = j[a] = function(c) { try { return new b(c, a) + \"\"; } catch (d) { return i(d)(); } }; return d.prototype = b.prototype = n, d.toString = function() { return b + \"\"; }, d; } function i(a) { var b = \"{Template Error}\", c = a.stack || \"\"; if (c) { c = c.split(\"\\n\").slice(0, 2).join(\"\\n\"); } else { for (var d in a) { c += \"\\n\" + a[d] + \"\\n\\n\"; } } return function() { return \"object\" == typeof console && console.error(b + \"\\n\\n\" + c), b; }; } var j = a.cache = {}, k = this.String, l = {\"\":\"&#62;\", '\"':\"&#34;\", \"'\":\"&#39;\", \"&\":\"&#38;\"}, m = Array.isArray || function(a) { return \"[object Array]\" === {}.toString.call(a); }, n = a.utils = {$helpers:{}, $include:function(a, b, c) { return a = f(c, a), g(a, b); }, $string:b, $escape:d, $each:e}, o = a.helpers = n.$helpers; a.get = function(a) { return j[a.replace(/^\\.\\//, \"\")]; }, a.helper = function(a, b) { o[a] = b; }, \"function\" == typeof define ? define(function() { return a; }) : \"undefined\" != typeof exports ? module.exports = a : this.template = a, a(\"body\", function(a) { var b = this, c = (b.$helpers, b.$escape), d = a.retlink, e = a.rettext, f = a.topid, g = a.topimg, h = a.topname, i = a.topgender, j = a.topbirth, l = a.toplostdate, m = a.toplostplace, n = a.toplostdesc, o = a.toplink, p = b.$each, q = a.otherdata, r = (a.otheritem, a.index, \"\"); return r += ' 404\\uff0c\\u60a8\\u8bbf\\u95ee\\u7684\\u9875\\u9762\\u627e\\u4e0d\\u56de\\u6765\\u4e86\\uff0c\\u4f46\\u6211\\u4eec\\u53ef\\u4ee5\\u4e00\\u8d77\\u5e2e\\u4ed6\\u4eec\\u56de\\u5bb6\\uff01 ', r += c(e), r += ' ', r += c(h), r += '(', r += c(i), r += ') \\u51fa\\u751f\\u65e5\\u671f\\uff1a', r += c(j), r += ' \\u5931\\u8e2a\\u65f6\\u95f4\\uff1a', r += c(l), r += ' \\u5931\\u8e2a\\u5730\\u70b9\\uff1a', r += c(m), r += ' \\u5931\\u8e2a\\u4eba\\u7279\\u5f81\\u63cf\\u8ff0\\uff1a', r += c(n), r += ' \\u67e5\\u770b\\u8be6\\u60c5 \\u5206\\u4eab \\u817e\\u8baf\\u5fae\\u535a QQ\\u7a7a\\u95f4 \\u65b0\\u6d6a\\u5fae\\u535a \\u5fae\\u4fe1 ', p(q, function(a) { r += ' '; }), r += \" \", new k(r); }); }(); L2Dwidget.init({\"pluginRootPath\":\"live2dw/\",\"pluginJsPath\":\"lib/\",\"pluginModelPath\":\"assets/\",\"tagMode\":false,\"log\":false,\"model\":{\"jsonPath\":\"/live2dw/assets/hibiki.model.json\"},\"display\":{\"position\":\"left\",\"width\":150,\"height\":300},\"mobile\":{\"show\":true},\"react\":{\"opacity\":0.7}});"},{"title":"所有分类","date":"2020-06-06T07:48:46.196Z","updated":"2020-06-06T07:48:46.196Z","comments":true,"path":"categories/index.html","permalink":"https://www.kming6.com/categories/index.html","excerpt":"","text":""},{"title":"给我留言","date":"2020-06-06T07:48:46.196Z","updated":"2020-06-06T07:48:46.196Z","comments":true,"path":"comments/index.html","permalink":"https://www.kming6.com/comments/index.html","excerpt":"","text":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 采用 Valine 评论系统，请填写真实邮箱，否则收不到通知哦，请尽情灌水吧！😉 欢迎来到我的小站呀，很高兴遇见你！🤝 🏠 关于本站 本站定位为技术博客站，博客内容主要涉及编程语言Java、JS、SQL、Web等技术分享。 本博客是使用Hexo创建的静态响应式博客。网站内容不定期更新。如果内容有所不对，或你觉得不好的地方，欢迎留言指出。 本站属于个人非赢利性质的网站，所有转载的文章都以遵循原作者的版权声明注明了文章来源。 如果原文没有版权声明，按照目前互联网开放的原则，本网站将在不通知作者的情况下转载文章。 如果原文明确注明“禁止转载”，本网站将不会转载。 如果本网站转载的文章不符合作者的版权声明或者作者不想让本网站转载您的文章，请邮件告知，本站将会在第一时间删除相关信息！ 本站转载文章仅为留作备份和知识点分享的目的。 本站将尽力确保所提供信息的准确性及可靠性，但不保证信息的正确性和完整性，且不对因信息的不正确或遗漏导致的任何损失或损害承担相关责任。 本站所发布、转载的文章，其版权均归原作者所有。如其他自媒体、网站或个人从本网站下载使用，请在转载有关文章时务必尊重该文章的著作权，保留本网站注明的“原文来源”或者自行去原文处复制版权声明，并自负版权等法律责任。 本站的所有原创文章皆可以任意转载，但转载时务必请注明出处。 尊重原创，拥抱开源！ 👨‍💻 博主是谁博主很懒，还没想好说些什么 ⛹ 兴趣爱好偶尔打打游戏，看看电影 📬 联系我呀 添加好友请说明来意 欢迎灌水"},{"title":"我的友链","date":"2019-09-21T18:52:29.000Z","updated":"2020-06-06T07:48:46.196Z","comments":true,"path":"friends/index.html","permalink":"https://www.kming6.com/friends/index.html","excerpt":"","text":"各位大佬想交换友链的话可以在下方留言，必须要有名称、头像链接、和至少一个标签哦～ 名称： Kming’ Blog头像： https://cdn.jsdelivr.net/gh/liucm-it/ImgHosting/pic/avatar-pigImg.jpg网址： https://www.kming6.com标签： Java、Web前端 分组和标签不合适的话可以留言或者发邮件私聊我进行更改。"},{"title":"所有标签","date":"2020-06-06T07:48:46.196Z","updated":"2020-06-06T07:48:46.196Z","comments":true,"path":"tags/index.html","permalink":"https://www.kming6.com/tags/index.html","excerpt":"","text":""},{"title":"","date":"2020-06-06T07:48:46.196Z","updated":"2020-06-06T07:48:46.196Z","comments":true,"path":"about/index.html","permalink":"https://www.kming6.com/about/index.html","excerpt":"","text":"Kming's Blog | About document.onkeydown = function () { if (window.event && window.event.keyCode == 123) { event.keyCode = 0; event.returnValue = false; return false; } }; 您的浏览器不支持audio标签，无法播放音乐！ 江湖名称：Kming Liu 常驻之地：中国 | 上海 初度之辰：90后 兴趣爱好：编程 | 乒乓球 | 游戏 技能简介 | Skill HTML/CSS/JS 85% JAVA 90% PHP 60% VUE 80% GIT 90% SVN 80% Hexo 80% 个人简介 | Introduction ● 学历：本科； ● 现况：Java后端、Web前端开发； ● 目标：Java后端 or 前端开发工程师； ● 博客：记录学习过程，厚积才能薄发； ● 兴趣：兴趣是最好的老师； ● 其他：虽然很菜，但是正在努力学习中！ 联系我 | Contact me Copyright © 2020 Kming's Blog. All rights reserved. if ('addEventListener' in window) { window.addEventListener('load', function () { document.body.className = document.body.className.replace(/\\bis-loading\\b/, ''); }); document.body.className += (navigator.userAgent.match(/(MSIE|rv:11\\.0)/) ? ' is-ie' : ''); } uniform mat4 uProjection; uniform mat4 uModelview; uniform vec3 uResolution; uniform vec3 uOffset; uniform vec3 uDOF; //x:focus distance, y:focus radius, z:max radius uniform vec3 uFade; //x:start distance, y:half distance, z:near fade start attribute vec3 aPosition; attribute vec3 aEuler; attribute vec2 aMisc; //x:size, y:fade varying vec3 pposition; varying float psize; varying float palpha; varying float pdist; //varying mat3 rotMat; varying vec3 normX; varying vec3 normY; varying vec3 normZ; varying vec3 normal; varying float diffuse; varying float specular; varying float rstop; varying float distancefade; void main(void) { // Projection is based on vertical angle vec4 pos = uModelview * vec4(aPosition + uOffset, 1.0); gl_Position = uProjection * pos; gl_PointSize = aMisc.x * uProjection[1][1] / -pos.z * uResolution.y * 0.5; pposition = pos.xyz; psize = aMisc.x; pdist = length(pos.xyz); palpha = smoothstep(0.0, 1.0, (pdist - 0.1) / uFade.z); vec3 elrsn = sin(aEuler); vec3 elrcs = cos(aEuler); mat3 rotx = mat3( 1.0, 0.0, 0.0, 0.0, elrcs.x, elrsn.x, 0.0, -elrsn.x, elrcs.x ); mat3 roty = mat3( elrcs.y, 0.0, -elrsn.y, 0.0, 1.0, 0.0, elrsn.y, 0.0, elrcs.y ); mat3 rotz = mat3( elrcs.z, elrsn.z, 0.0, -elrsn.z, elrcs.z, 0.0, 0.0, 0.0, 1.0 ); mat3 rotmat = rotx * roty * rotz; normal = rotmat[2]; mat3 trrotm = mat3( rotmat[0][0], rotmat[1][0], rotmat[2][0], rotmat[0][1], rotmat[1][1], rotmat[2][1], rotmat[0][2], rotmat[1][2], rotmat[2][2] ); normX = trrotm[0]; normY = trrotm[1]; normZ = trrotm[2]; const vec3 lit = vec3(0.6917144638660746, 0.6917144638660746, -0.20751433915982237); float tmpdfs = dot(lit, normal); if(tmpdfs < 0.0) { normal = -normal; tmpdfs = dot(lit, normal); } diffuse = 0.4 + tmpdfs; vec3 eyev = normalize(-pos.xyz); if(dot(eyev, normal) > 0.0) { vec3 hv = normalize(eyev + lit); specular = pow(max(dot(hv, normal), 0.0), 20.0); } else { specular = 0.0; } rstop = clamp((abs(pdist - uDOF.x) - uDOF.y) / uDOF.z, 0.0, 1.0); rstop = pow(rstop, 0.5); //-0.69315 = ln(0.5) distancefade = min(1.0, exp((uFade.x - pdist) * 0.69315 / uFade.y)); } #ifdef GL_ES //precision mediump float; precision highp float; #endif uniform vec3 uDOF; //x:focus distance, y:focus radius, z:max radius uniform vec3 uFade; //x:start distance, y:half distance, z:near fade start const vec3 fadeCol = vec3(0.08, 0.03, 0.06); varying vec3 pposition; varying float psize; varying float palpha; varying float pdist; //varying mat3 rotMat; varying vec3 normX; varying vec3 normY; varying vec3 normZ; varying vec3 normal; varying float diffuse; varying float specular; varying float rstop; varying float distancefade; float ellipse(vec2 p, vec2 o, vec2 r) { vec2 lp = (p - o) / r; return length(lp) - 1.0; } void main(void) { vec3 p = vec3(gl_PointCoord - vec2(0.5, 0.5), 0.0) * 2.0; vec3 d = vec3(0.0, 0.0, -1.0); float nd = normZ.z; //dot(-normZ, d); if(abs(nd) < 0.0001) discard; float np = dot(normZ, p); vec3 tp = p + d * np / nd; vec2 coord = vec2(dot(normX, tp), dot(normY, tp)); //angle = 15 degree const float flwrsn = 0.258819045102521; const float flwrcs = 0.965925826289068; mat2 flwrm = mat2(flwrcs, -flwrsn, flwrsn, flwrcs); vec2 flwrp = vec2(abs(coord.x), coord.y) * flwrm; float r; if(flwrp.x < 0.0) { r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.36, 0.96) * 0.5); } else { r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.58, 0.96) * 0.5); } if(r > rstop) discard; vec3 col = mix(vec3(1.0, 0.8, 0.75), vec3(1.0, 0.9, 0.87), r); float grady = mix(0.0, 1.0, pow(coord.y * 0.5 + 0.5, 0.35)); col *= vec3(1.0, grady, grady); col *= mix(0.8, 1.0, pow(abs(coord.x), 0.3)); col = col * diffuse + specular; col = mix(fadeCol, col, distancefade); float alpha = (rstop > 0.001)? (0.5 - r / (rstop * 2.0)) : 1.0; alpha = smoothstep(0.0, 1.0, alpha) * palpha; gl_FragColor = vec4(col * 0.5, alpha); } uniform vec3 uResolution; attribute vec2 aPosition; varying vec2 texCoord; varying vec2 screenCoord; void main(void) { gl_Position = vec4(aPosition, 0.0, 1.0); texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5); screenCoord = aPosition.xy * vec2(uResolution.z, 1.0); } #ifdef GL_ES //precision mediump float; precision highp float; #endif uniform vec2 uTimes; varying vec2 texCoord; varying vec2 screenCoord; void main(void) { vec3 col; float c; vec2 tmpv = texCoord * vec2(0.8, 1.0) - vec2(0.95, 1.0); c = exp(-pow(length(tmpv) * 1.8, 2.0)); col = mix(vec3(0.02, 0.0, 0.03), vec3(0.96, 0.98, 1.0) * 1.5, c); gl_FragColor = vec4(col * 0.5, 1.0); } #ifdef GL_ES //precision mediump float; precision highp float; #endif uniform sampler2D uSrc; uniform vec2 uDelta; varying vec2 texCoord; varying vec2 screenCoord; void main(void) { vec4 col = texture2D(uSrc, texCoord); gl_FragColor = vec4(col.rgb * 2.0 - vec3(0.5), 1.0); } #ifdef GL_ES //precision mediump float; precision highp float; #endif uniform sampler2D uSrc; uniform vec2 uDelta; uniform vec4 uBlurDir; //dir(x, y), stride(z, w) varying vec2 texCoord; varying vec2 screenCoord; void main(void) { vec4 col = texture2D(uSrc, texCoord); col = col + texture2D(uSrc, texCoord + uBlurDir.xy * uDelta); col = col + texture2D(uSrc, texCoord - uBlurDir.xy * uDelta); col = col + texture2D(uSrc, texCoord + (uBlurDir.xy + uBlurDir.zw) * uDelta); col = col + texture2D(uSrc, texCoord - (uBlurDir.xy + uBlurDir.zw) * uDelta); gl_FragColor = col / 5.0; } #ifdef GL_ES //precision mediump float; precision highp float; #endif uniform sampler2D uSrc; uniform vec2 uDelta; varying vec2 texCoord; varying vec2 screenCoord; void main(void) { gl_FragColor = texture2D(uSrc, texCoord); } uniform vec3 uResolution; attribute vec2 aPosition; varying vec2 texCoord; varying vec2 screenCoord; void main(void) { gl_Position = vec4(aPosition, 0.0, 1.0); texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5); screenCoord = aPosition.xy * vec2(uResolution.z, 1.0); } #ifdef GL_ES //precision mediump float; precision highp float; #endif uniform sampler2D uSrc; uniform sampler2D uBloom; uniform vec2 uDelta; varying vec2 texCoord; varying vec2 screenCoord; void main(void) { vec4 srccol = texture2D(uSrc, texCoord) * 2.0; vec4 bloomcol = texture2D(uBloom, texCoord); vec4 col; col = srccol + bloomcol * (vec4(1.0) + srccol); col *= smoothstep(1.0, 0.0, pow(length((texCoord - vec2(0.5)) * 2.0), 1.2) * 0.5); col = pow(col, vec4(0.45454545454545)); //(1.0 / 2.2) gl_FragColor = vec4(col.rgb, 1.0); gl_FragColor.a = 1.0; } L2Dwidget.init({\"pluginRootPath\":\"live2dw/\",\"pluginJsPath\":\"lib/\",\"pluginModelPath\":\"assets/\",\"tagMode\":false,\"log\":false,\"model\":{\"jsonPath\":\"/live2dw/assets/hibiki.model.json\"},\"display\":{\"position\":\"left\",\"width\":150,\"height\":300},\"mobile\":{\"show\":true},\"react\":{\"opacity\":0.7}});"}],"posts":[{"title":"Maven的scope都有什么区别？","slug":"Maven的scope都有什么区别？","date":"2020-05-25T20:47:29.000Z","updated":"2020-06-06T07:48:46.192Z","comments":true,"path":"posts/44361/","link":"","permalink":"https://www.kming6.com/posts/44361/","excerpt":"scope元素的作用：控制 dependency 元素的使用范围。通俗来说，就是控制 Jar 包在哪些范围被加载和使用。","text":"scope元素的作用：控制 dependency 元素的使用范围。通俗来说，就是控制 Jar 包在哪些范围被加载和使用。 compile含义：compile为默认值，如果没有指定 scope 值，该元素的默认值为 compile。被依赖项目需要参与到当前项目的编译，测试，打包，运行等阶段。打包的时候通常会包含被依赖项目。 provided含义：被依赖项目理论上可以参与编译、测试、运行等阶段，相当于compile，但是再打包阶段做了exclude的动作。适用场景：例如， 如果我们在开发一个web 应用，在编译时我们需要依赖 servlet-api.jar，但是在运行时我们不需要该 jar 包，因为这个 jar 包已由应用服务器提供，此时我们需要使用 provided 进行范围修饰。 runtime含义：表示被依赖项目无需参与项目的编译，但是会参与到项目的测试和运行。与compile相比，被依赖项目无需参与项目的编译。适用场景：例如，在编译的时候我们不需要 JDBC API 的 jar 包，而在运行的时候我们才需要 JDBC 驱动包。 test含义： 表示被依赖项目仅仅参与测试相关的工作，包括测试代码的编译，执行。适用场景：例如，Junit 测试。 system含义：system 元素与 provided 元素类似，但是被依赖项不会从 maven 仓库中查找，而是从本地系统中获取，systemPath 元素用于制定本地系统中 jar 文件的路径。 比如： 1234567&lt;dependency&gt; &lt;groupId&gt;org.open&lt;/groupId&gt; &lt;artifactId&gt;open-core&lt;/artifactId&gt; &lt;version&gt;1.5&lt;/version&gt; &lt;scope&gt;system&lt;/scope&gt; &lt;systemPath&gt;$&#123;basedir&#125;/WEB-INF/lib/xxx.jar&lt;/systemPath&gt;&lt;/dependency&gt; import它只使用在中，表示从其它的pom中导入dependency的配置，例如 (B项目导入A项目中的包配置)： springBoot项目，常常会有如下依赖： 12345&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.1.0.RELEASE&lt;/version&gt;&lt;/parent&gt; Maven的继承和Java的继承一样，是无法实现多重继承的，如果10个、20个甚至更多模块继承自同一个模块，那么按照我们之前的做法，这个父模块的dependencyManagement会包含大量的依赖。如果你想把这些依赖分类以更清晰的管理，那就不可能了，import scope依赖能解决这个问题。你可以把dependencyManagement放到单独的专门用来管理依赖的pom中，然后在需要使用依赖的模块中通过import scope依赖，就可以引入dependencyManagement。 如： 123456789101112131415161718192021&lt;project&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.test.package&lt;/groupId&gt; &lt;artifactId&gt;commen-parent1&lt;/artifactId&gt; &lt;packaging&gt;pom&lt;/packaging&gt; &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt; &lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactid&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.5.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactid&gt;log4j&lt;/artifactId&gt; &lt;version&gt;1.2.18&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/dependencyManagement&gt;&lt;/project&gt; 可以通过非继承的方式来引入这段依赖管理配置 1234567891011121314151617181920&lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.test.package&lt;/groupId&gt; &lt;artifactid&gt;commen-parent1&lt;/artifactId&gt; &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/dependencyManagement&gt;&lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactid&gt;junit&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactid&gt;log4j&lt;/artifactId&gt;&lt;/dependency&gt; import scope只能用在dependencyManagement里面","categories":[{"name":"Java","slug":"Java","permalink":"https://www.kming6.com/categories/Java/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"https://www.kming6.com/tags/Maven/"}]},{"title":"Spring boot整合Druid连接池","slug":"Spring-boot整合Druid连接池","date":"2020-05-13T21:25:10.000Z","updated":"2020-06-06T07:48:46.196Z","comments":true,"path":"posts/15769/","link":"","permalink":"https://www.kming6.com/posts/15769/","excerpt":"druid是阿里巴巴开源、java语言的数据库连接池，除连接池功能外，druid还提供了强大的监控和扩展功能。官方号称为java语言最好的数据库连接池。","text":"druid是阿里巴巴开源、java语言的数据库连接池，除连接池功能外，druid还提供了强大的监控和扩展功能。官方号称为java语言最好的数据库连接池。 数据库配置在spring-boot的配置文件application.yml中添加数据库基本配置： 1234567spring: datasource: druid: url: jdbc:postgresql://127.0.0.1:5432/activiti-demo username: louie password: louie1234 driver-class-name: org.postgresql.Driver 以上配置中spring.datasource.druid.xxx为druid为spring-boot提供的配置属性，您也可以不适用它们，使用spring-boot原有的配置属性也是一样的。 启动服务执行Application类启动spring-boot，浏览器访问http://localhost:8080/druid/index.html查看监控效果: 数据库密码加密将数据库密码直接写在配置文件中，安全方面考虑是具有风险的，druid的configFilter具备数据库密码加密功能。 密码加密 cmd进入Druidjar包所在目录，执行以下命令，其中PASSWORD为您数据的密码 1java -cp druid-1.1.9.jar com.alibaba.druid.filter.config.ConfigTools PASSWORD 输出如下，其中password即为加密后的密码，publicKey为加密的公钥： 123privateKey:MIIBVQIBADANBgkqhkiG9w0BAQEFAASCAT8wggE7AgEAAkEAjhd6PlxyNExMYJsPuIXnvJIVIL77q1ZE+YcZDFMaCMcK3hznsx89NrobrFXaEoHyLWuzRsD2q9/7tpv3fn+3owIDAQABAkBNS6I5OEr7/iFyUAfORjGY2BLcPGhlfUmKQB61IKPB781xWit3FtFocqKGde6iuRBjMGtDKINFD5CqUYYuIK8hAiEAxQ1r03pi+uAqSrb75pieniJuN9fljLlomE5+UGVN3ZMCIQC4mRRs9YsW0i9QjybqvzD615eIv8c9eQjJG67Ot4uHsQIhAJdJcptuv0d1i4LJciTc0AsAzDY7n5WnU9J7kScQX/PZAiEApw450uVfizaJhSEXugduXwOuah4MRBB9p+o6h27JgfECIHrHqsV57OZh9m2f28j5/Ax5O4xUDy9STvkWR/zvHhu5publicKey:MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAI4Xej5ccjRMTGCbD7iF57ySFSC++6tWRPmHGQxTGgjHCt4c57MfPTa6G6xV2hKB8i1rs0bA9qvf+7ab935/t6MCAwEAAQ==password:TT0HLMKz6fPGiaih/F7r/s6zRonc9XiViRY5abqJSZTANPppXpxuMntcwuXqFEZH15v/qlE3UNnHx7pb9I3xWA== 修改application.yml 密码改为加密后的密码 开启druid的configFilter 启用加密并配置publicKey 参考配置如下 1234567891011121314151617spring: datasource: druid: url: jdbc:postgresql://127.0.0.1:5432/activiti-demo username: louie password: TT0HLMKz6fPGiaih/F7r/s6zRonc9XiViRY5abqJSZTANPppXpxuMntcwuXqFEZH15v/qlE3UNnHx7pb9I3xWA== #加密后的密码 driver-class-name: org.postgresql.Driver filter: config: enabled: true #开启configFilter connection-properties: config.decrypt=true;config.decrypt.key=$&#123;public_key&#125; #启用加密，配置公钥 jpa: hibernate: ddl-auto: none database: postgresqlpublic_key: MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAI4Xej5ccjRMTGCbD7iF57ySFSC++6tWRPmHGQxTGgjHCt4c57MfPTa6G6xV2hKB8i1rs0bA9qvf+7ab935/t6MCAwEAAQ== spring监控Druid提供了Spring和Jdbc的关联监控，基于spring AOP实现，可通过类型、方法名等多种方法配置拦截，其详细说明点击这里查看，以下示例为按方法名正则匹配拦截的配置 1234spring datasource druid aop-patterns: com.github.*","categories":[{"name":"Java","slug":"Java","permalink":"https://www.kming6.com/categories/Java/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.kming6.com/tags/SpringBoot/"},{"name":"Druid","slug":"Druid","permalink":"https://www.kming6.com/tags/Druid/"}]},{"title":"mysql创建表出错 [Err] 1055","slug":"mysql创建表出错-Err-1055","date":"2020-02-29T13:01:10.000Z","updated":"2020-06-06T07:48:46.196Z","comments":true,"path":"posts/51518/","link":"","permalink":"https://www.kming6.com/posts/51518/","excerpt":"1055 - Expression #1 of ORDER BY clause is not in GROUP BY clause and contains nonaggregated column ‘information_schema.PROFILING.SEQ’ which is not functionally dependent on columns in GROUP BY clause","text":"1055 - Expression #1 of ORDER BY clause is not in GROUP BY clause and contains nonaggregated column ‘information_schema.PROFILING.SEQ’ which is not functionally dependent on columns in GROUP BY clause 方法一1SET sql_mode=(SELECT REPLACE(@@sql_mode,'ONLY_FULL_GROUP_BY','')); 优点：不用重启mysql 缺点：重启mysql后还会出现标题错误 1SELECT @@global.sql_mode; 方法二在my.cnf中修改 12[mysqld]sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION 注:sql_mode值用select @@sql_mode;查询出来后，将ONLY_FULL_GROUP_BY去掉剩余的值 优点：重启mysql 一次性解决问题 缺点：需要重启mysql","categories":[{"name":"数据库","slug":"数据库","permalink":"https://www.kming6.com/categories/数据库/"},{"name":"Mysql","slug":"数据库/Mysql","permalink":"https://www.kming6.com/categories/数据库/Mysql/"}],"tags":[{"name":"Mysql","slug":"Mysql","permalink":"https://www.kming6.com/tags/Mysql/"}]},{"title":"如何让Mysql数据库支持emoji配置?","slug":"如何让Mysql数据库支持emoji配置","date":"2020-02-17T21:58:26.000Z","updated":"2020-06-06T07:48:46.196Z","comments":true,"path":"posts/57060/","link":"","permalink":"https://www.kming6.com/posts/57060/","excerpt":"以下两种方案任选一notes: 修改数据库配置可以一劳永逸，直接sql修改当机器重启时新加的设置会被还原","text":"以下两种方案任选一notes: 修改数据库配置可以一劳永逸，直接sql修改当机器重启时新加的设置会被还原 改数据库编码修改数据库配置文件windows下的为my.ini(linux下的为my.cnf)windows下的my.ini路径：C:\\ProgramData\\MySQL\\MySQL Server 5.6 123456789[client]default-character-set = utf8mb4[mysql]default-character-set = utf8mb4[mysqld]character-set-server = utf8mb4collation-server = utf8mb4_unicode_ci 修改数据库、表、字段的编码为utf8m641234567-- 修改数据库:ALTER DATABASE `test` CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci;-- 修改表:ALTER TABLE `article` CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;-- 修改表字段:ALTER TABLE `article` CHANGE `content` content LONGTEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT '文章内容';ALTER TABLE `article` CHANGE `content_md` content_md LONGTEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'markdown版的文章内容'; 添加配置1234spring: datasource: druid: connection-init-sqls: set names utf8mb4","categories":[{"name":"数据库","slug":"数据库","permalink":"https://www.kming6.com/categories/数据库/"},{"name":"Mysql","slug":"数据库/Mysql","permalink":"https://www.kming6.com/categories/数据库/Mysql/"}],"tags":[{"name":"Mysql","slug":"Mysql","permalink":"https://www.kming6.com/tags/Mysql/"}]},{"title":"如何使用Win10系统远程Ubuntu16.4系统","slug":"如何使用Win10系统远程Ubuntu16-4系统","date":"2020-02-11T08:39:13.000Z","updated":"2020-06-06T07:48:46.196Z","comments":true,"path":"posts/30266/","link":"","permalink":"https://www.kming6.com/posts/30266/","excerpt":"偶然遇到需要使用win10远程Ubuntu16.4系统进行远程办公，记录一下方便以后使用","text":"偶然遇到需要使用win10远程Ubuntu16.4系统进行远程办公，记录一下方便以后使用 Ubuntu系统具体步骤如下 安装相关软件 123sudo apt-get install tightvncserver xrdp xubuntu-desktopecho xfce4-session &gt;~/.xsession 编辑startwm.sh，在./etc/X11/Xsession的前一行添加xfce4-session 1sudo vim /etc/xrdp/startwm.sh # 编辑文件，在 ./etc/X11/Xsession前添加一行 xfce4-session 重启服务，重启系统 12sudo service xrdp restartsudo reboot Win10系统操作步骤 打开远程桌面，(WIN + R输入mstsc)，输入IP地址 登陆模式选择，使用的默认的，输入密码账号连接即可 连接上如图所示","categories":[{"name":"远程连接","slug":"远程连接","permalink":"https://www.kming6.com/categories/远程连接/"}],"tags":[{"name":"Win10","slug":"Win10","permalink":"https://www.kming6.com/tags/Win10/"},{"name":"Ubuntu16.4","slug":"Ubuntu16-4","permalink":"https://www.kming6.com/tags/Ubuntu16-4/"}]},{"title":"Spring Boot注解整理","slug":"Spring-Boot注解整理","date":"2020-01-10T19:39:06.000Z","updated":"2020-06-06T07:48:46.196Z","comments":true,"path":"posts/52374/","link":"","permalink":"https://www.kming6.com/posts/52374/","excerpt":"使用Spring Boot框架过程中会遇到许多的注解，在此整理一下方便查阅","text":"使用Spring Boot框架过程中会遇到许多的注解，在此整理一下方便查阅 Spring MVC注解 @RequestMapping @RequestMapping注解主要使用在类或方法上，将Web请求的路径与Controller类中的方法做映射。@RequestMapping注解有以下几种配置属性： value: 映射请求URL或者其别名 method: 兼容HTTP的方法名 params: 根据HTTP参数的存在、缺省或值对请求进行过滤 header: 根据HTTP Header的存在、缺省或值对请求进行过滤 consume: 设定在HTTP请求正文中允许使用的媒体类型 product: 在HTTP响应体中允许使用的媒体类型 常用示例： 12345678@Controllerpublic class DemoController &#123; @RequestMapping(value=\"/demo/test\", method=RequestMethod.GET) public String test() &#123; return \"/test\"; &#125;&#125; 123456789@Controller@RequestMapping(\"/demo\")public class DemoController &#123; @RequestMapping(value=\"/test\", method=RequestMethod.GET) public String test() &#123; return \"/test\"; &#125;&#125; @RequestHeader可以使用@RequestHeader注释将请求头绑定到控制器中的方法参数。 常见的Request headers 123456Host localhost:8080Accept text/html,application/xhtml+xml,application/xml;q=0.9Accept-Language fr,en-gb;q=0.7,en;q=0.3Accept-Encoding gzip,deflateAccept-Charset ISO-8859-1,utf-8;q=0.7,*;q=0.7Keep-Alive 300 获取Accept-Encoding和Keep-Alive的值，示例如下： 123456@GetMapping(\"/demo\")public void handle( @RequestHeader(\"Accept-Encoding\") String encoding, @RequestHeader(\"Keep-Alive\") long keepAlive) &#123; //...&#125; @RequestBody @RequestBody在处理请求方法的参数列表中使用，它可以将请求主体中的参数绑定到一个对象中，请求主体参数是通过HttpMessageConverter传递的，根据请求主体中的参数名与对象的属性名进行匹配并绑定值。此外，还可以通过@Valid注解对请求主体中的参数进行校验。 常用示例： 1234567891011@Controller@RequestMapping(\"/users\")public class UserController&#123; @Autowired private UserService userService; @PostMapping(\"/add\") public User addUser(@Valid @RequestBody User user) &#123; return userService.save(user); &#125;&#125; @GetMapping @GetMapping注解用于处理HTTP GET请求，并将请求映射到具体的处理方法中。具体来说，@GetMapping是一个组合注解，它相当于是@RequestMapping(method=RequestMethod.GET)的简写方式。常用示例： 12345678910111213141516@Controller@RequestMapping(\"/users\")public class UserController&#123; @Autowired private UserService userService; @GetMapping(\"/\") public List&lt;User&gt; findAll() &#123; return userService.findAll(); &#125; @GetMapping(\"/&#123;id&#125;\") public List&lt;User&gt; findById(@PathVariable(name=\"id\") long id) &#123; return userService.findOne(id); &#125;&#125; @PostMapping @PostMapping注解用于处理HTTP POST请求，并将请求映射到具体的处理方法中。@PostMapping与@GetMapping一样，也是一个组合注解，它相当于是@RequestMapping(method=HttpMethod.POST)的简写方式。常用示例： 1234567891011@Controller@RequestMapping(\"/users\")public class UserController&#123; @Autowired private UserService userService; @PostMapping(\"/add\") public User addUser(@Valid @RequestBody User user) &#123; return userService.save(user); &#125;&#125; @PutMapping @PutMapping注解用于处理HTTP PUT请求，并将请求映射到具体的处理方法中，@PutMapping是一个组合注解，相当于是@RequestMapping(method=HttpMethod.PUT)的简写方式。常用示例： 1234567891011@Controller@RequestMapping(\"/users\")public class UserController&#123; @Autowired private UserService userService; @PutMapping(\"/&#123;id&#125;\") public User editUser(@PathVariable(name=\"id\") long id, User user) &#123; return userService.update(user); &#125;&#125; @DeleteMapping @DeleteMapping注解用于处理HTTP DELETE请求，并将请求映射到删除方法中。@DeleteMapping是一个组合注解，它相当于是@RequestMapping(method=HttpMethod.DELETE)的简写方式 1234567891011@Controller@RequestMapping(\"/users\")public class UserController&#123; @Autowired private UserService userService; @DeleteMapping(\"/&#123;id&#125;\") public boolean deleteById(@PathVariable(name=\"id\") long id) &#123; return userService.delete(id); &#125;&#125; @PatchMapping @PatchMapping注解用于处理HTTP PATCH请求，并将请求映射到对应的处理方法中。@PatchMapping相当于是@RequestMapping(method=HttpMethod.PATCH)的简写方式。常用示例： 123456789@Controller@RequestMapping(\"/users\")public class UserController&#123; @PatchMapping(\"/patch\") public ResponseEntity&lt;Object&gt; patch() &#123; return new ResponseEntity(\"patch method response message\", HttpStatus.OK); &#125;&#125; @ControllerAdvice @ControllerAdvice是@Component注解的一个延伸注解，Spring会自动扫描并检测被@ControllerAdvice所标注的类。@ControllerAdvice需要和@ExceptionHandler、@InitBinder以及@ModelAttribute注解搭配使用，主要是用来处理控制器所抛出的异常信息。定义一个被@ControllerAdvice所标注的类，在该类中，定义一个用于处理具体异常的方法，并使用@ExceptionHandler注解进行标记。此外，在有必要的时候，可以使用@InitBinder在类中进行全局的配置，还可以使用@ModelAttribute配置与视图相关的参数。使用@ControllerAdvice注解，就可以快速的创建统一的，自定义的异常处理类。 示例代码： 1234567891011121314151617181920212223@ControllerAdvicepublic class ExceptionHandleController &#123; @InitBinder public void initBinder(WebDataBinder binder) &#123; CustomDateEditor editor = new CustomDateEditor(new SimpleDateFormat(\"yyyy-MM-dd\"),true); binder.registerCustomEditor(Date.class, editor); &#125; @ModelAttribute public void modelAttribute(Model model) &#123; model.addAttribute(\"msg\", \"user not found error.\"); &#125; @ExceptionHandler(value = &#123;AccountException.class&#125;) public ModelAndView unauthorizedExceptionHandle(Throwable e) &#123; e.printStackTrace(); // 打印异常栈 ModelAndView modelAndView = new ModelAndView(); modelAndView.addObject(\"ex\", ex); modelAndView.setViewName(\"error\"); return modelAndView; &#125;&#125; @ResponseBody @ResponseBody会自动将控制器中方法的返回值写入到HTTP响应中。特别的，@ResponseBody注解只能用在被@Controller注解标记的类中。如果在被@RestController标记的类中，则方法不需要使用@ResponseBody注解进行标注。@RestController相当于是@Controller和@ResponseBody的组合注解。示例代码： 123456789101112@Controller@RequestMapping(\"/users\")public class UserController&#123; @Autowired private UserService userService; @ResponseBody @GetMapping(\"/&#123;id&#125;\") public User findOne(@PathVariable(name=\"id\") long id) &#123; return userService.findOne(id); &#125;&#125; @ExceptionHandler @ExceptionHander注解用于标注处理特定类型异常类所抛出异常的方法。当控制器中的方法抛出异常时，Spring会自动捕获异常，并将捕获的异常信息传递给被@ExceptionHandler标注的方法。代码示例： 123456789101112@ControllerAdvicepublic class ExceptionHandleController &#123; @ExceptionHandler(value = &#123;AccountException.class&#125;) public ModelAndView unauthorizedExceptionHandle(Throwable e) &#123; e.printStackTrace(); // 打印异常栈 ModelAndView modelAndView = new ModelAndView(); modelAndView.addObject(\"ex\", ex); modelAndView.setViewName(\"error\"); return modelAndView; &#125;&#125; @ResponseStatus @ResponseStatus注解可以标注请求处理方法。使用此注解，可以指定响应所需要的HTTP STATUS。特别地，我们可以使用HttpStauts类对该注解的value属性进行赋值。代码示例： 12345678@RequestMapping(\"/401\")@ResponseStatus(HttpStatus.BAD_REQUEST)public ModelAndView errorHtml401(HttpServletRequest request, HttpServletResponse response, WebRequest webRequest) &#123; response.setStatus(HttpStatus.UNAUTHORIZED.value()); Map&lt;String, Object&gt; model = getErrorAttributes(webRequest, isIncludeStackTrace(request, MediaType.TEXT_HTML)); model.put(\"queryString\", request.getQueryString()); return new ModelAndView(\"error/401\", model);&#125; @PathVariable @PathVariable注解是将方法中的参数绑定到请求URI中的模板变量上。可以通过@RequestMapping注解来指定URI的模板变量，然后使用@PathVariable注解将方法中的参数绑定到模板变量上。@PathVariable注解允许我们使用value或name属性来给参数取一个别名。代码示例： 123456789101112@Controller@RequestMapping(\"/users\")public class UserController&#123; @Autowired private UserService userService; @ResponseBody @GetMapping(\"/&#123;id&#125;\") public User findOne(@PathVariable(name=\"id\") long id) &#123; return userService.findOne(id); &#125;&#125; 模板变量名需要使用“{ }”进行包裹，如果方法的参数名与URI模板变量名一致，则在@PathVariable中就可以省略别名的定义。如果参数是一个非必须的，可选的项，则可以在@PathVariable中设置require = false。 123456789101112@Controller@RequestMapping(\"/users\")public class UserController&#123; @Autowired private UserService userService; @ResponseBody @GetMapping(\"/&#123;id&#125;\") public User findOne(@PathVariable long id) &#123; return userService.findOne(id); &#125;&#125; @RequestParam @RequestParam注解用于将方法的参数与Web请求的传递的参数进行绑定。使用@RequestParam可以轻松的访问HTTP请求参数的值。代码示例： 1234@PostMapping(\"/getUserTag\")public UserTag getUserTag(@RequestParam(name=\"id\") Long id) &#123; return userTagService.findById(id);&#125; @Controller @Controller是@Component注解的一个延伸，Spring会自动扫描并配置被该注解标注的类。此注解用于标注Spring MVC的控制器。示例代码： 12345678910111213@Controller@RequestMapping(\"/users\")public class UserController&#123; @Autowired private UserService userService; @ResponseBody @GetMapping(\"/&#123;id&#125;\") public User findOne(@PathVariable long id) &#123; return userService.findOne(id); &#125;&#125; @RestController @RestController是在Spring 4.0开始引入的，这是一个特定的控制器注解。此注解相当于@Controller和@ResponseBody的简写方式。当使用此注解时，不需要再在方法上使用@ResponseBody注解。代码示例： 123456789101112@RestController@RequestMapping(\"/users\")public class UserController&#123; @Autowired private UserService userService; @GetMapping(\"/&#123;id&#125;\") public User findOne(@PathVariable long id) &#123; return userService.findOne(id); &#125;&#125; @CookieValue 可以使用@CookieValue注释将HTTP cookie的值绑定到控制器中的方法参数。 代码示例： 1234@GetMapping(\"/demo\")public void handle(@CookieValue(\"JSESSIONID\") String cookie) &#123; //...&#125; @SessionAttributes @SessionAttributes用于在请求之间的HTTP Servlet会话中存储模型属性。它是类型级别的注释，声明特定控制器使用的会话属性。这通常列出模型属性的名称或模型属性的类型，它们应该透明地存储在会话中，以便后续请求访问。@SessionAttributes用于在请求之间的HTTP Servlet会话中存储模型属性。它是类型级别的注释，声明特定控制器使用的会话属性。这通常列出模型属性的名称或模型属性的类型，它们应该透明地存储在会话中，以便后续请求访问。 代码示例： 12345@Controller@SessionAttributes(\"pet\") public class EditPetForm &#123; // ...&#125; 如果您需要访问全局管理的预先存在的会话属性(即，在控制器之外——例如，通过过滤器)，并且可能存在也可能不存在，那么您可以在方法参数上使用@SessionAttribute注释，如下面的示例所示: 1234@RequestMapping(\"/\")public String handle(@SessionAttribute User user) &#123; // ...&#125; @RequestAttribute 与@SessionAttribute类似，您可以使用@RequestAttribute注释来访问先前创建的已存在的请求属性(例如，通过Servlet过滤器或HandlerInterceptor): 1234@GetMapping(\"/\")public String handle(@RequestAttribute Client client) &#123; // ...&#125; @ModelAttribute、 通过此注解，可以通过模型索引名称来访问已经存在于控制器中的model。与@PathVariable和@RequestParam注解一样，如果参数名与模型具有相同的名字，则不必指定索引名称代码示例： 1234@PostMapping(\"/users\")public void addUser(@ModelAttribute(\"user\") User user) &#123; userService.save(user);&#125; @CrossOrigin @CrossOrigin注解将为请求处理类或请求处理方法提供跨域调用支持。如果我们将此注解标注类，那么类中的所有方法都将获得支持跨域的能力。使用此注解的好处是可以微调跨域行为。代码示例： 12345678@CrossOrigin@GetMapping(\"/user/profile\")public User userDetails(@RequestParam(name=\"id\", defaultValue=\"0\") long id) &#123; if (id == 0) &#123; return new User(); &#125; return userService.findOne(id);&#125; @InitBinder @InitBinder注解用于标注初始化WebDataBinider的方法，该方法用于对Http请求传递的表单数据进行处理，如时间格式化、字符串处理等。代码示例： 12345@InitBinderpublic void initBinder(WebDataBinder binder) &#123; CustomDateEditor editor = new CustomDateEditor(new SimpleDateFormat(\"yyyy-MM-dd\"),true); binder.registerCustomEditor(Date.class, editor);&#125; Spring Bean相关注解 @ComponentScan @ComponentScan注解用于配置Spring需要扫描的被组件注解注释的类所在的包。可以通过配置其basePackages属性或者value属性来配置需要扫描的包路径。value属性是basePackages的别名。代码示例： 12345@Configuration@ComponentScan(basePackages=\"com.example\")public class ScanConfig() &#123;&#125; @Component @Component注解用于标注一个普通的组件类，它没有明确的业务范围，只是通知Spring被此注解的类需要被纳入到Spring Bean容器中并进行管理。代码示例： 12345678910111213141516171819@Componentpublic class JobRunner implements ApplicationRunner &#123; @Autowired private QuartzJobRepository quartzJobRepository; @Autowired private QuartzManage quartzManage; @Override public void run(ApplicationArguments applicationArguments)&#123; System.out.println(\"----------------------注入定时任务-----------------------\"); List&lt;QuartzJob&gt; quartzJobs = quartzJobRepository.findByIsPauseIsFalse(); quartzJobs.forEach(quartzJob -&gt; &#123; quartzManage.addJob(quartzJob); &#125;); System.out.println(\"--------------------定时任务注入完成---------------------\"); &#125;&#125; @Service @Service注解是@Component的一个延伸（特例），它用于标注业务逻辑类。与@Component注解一样，被此注解标注的类，会自动被Spring所管理。代码示例： 123456789101112131415public interface UserService &#123; User addUser(User user);&#125;@Service(\"userService\")public class UserServiceImpl implements UserService &#123; @Autowired private UserRepository userRepository; @Override public User addUser(User user) &#123; userRepository.save(user); &#125;&#125; @Repository @Repository注解也是@Component注解的延伸，与@Component注解一样，被此注解标注的类会被Spring自动管理起来，@Repository注解用于标注DAO层的数据持久化类。代码示例： 1234@Repositorypublic class UserDaoImpl implements UserDao&#123; // ...&#125; Spring Dependency Inject 与 Bean Scops注解Spring DI注解 @DependsOn @DependsOn注解可以配置Spring IoC容器在初始化一个Bean之前，先初始化其他的Bean对象。代码示例： 1234567891011121314151617181920212223242526272829303132333435363738public class FirstBean &#123; @Autowired private SecondBean secondBean; @Autowired private ThirdBean thirdBean;&#125;public class SecondBean &#123; public SecondBean () &#123; // ... &#125;&#125;public class ThirdBean &#123; public ThirdBean () &#123; // ... &#125;&#125;@Configurationpublic class CustomerBeanConfig &#123; @Bean(\"firstBean\") @DependsOn(value=&#123;\"secondBean\", \"thirdBean\"&#125;) public FirstBean firstBean() &#123; return new FirstBean(); &#125; @Bean(\"secondBean\") public SecondBean secondBean() &#123; return new SecondBean(); &#125; @Bean(\"thirdBean\") public ThirdBean thirdBean() &#123; return new ThirdBean(); &#125;&#125; @Bean @Bean注解主要的作用是告知Spring，被此注解所标注的类将需要纳入到Bean管理工厂中。@Bean注解的用法很简单，在这里，着重介绍@Bean注解中initMethod和destroyMethod的用法。代码示例： 12345678910111213141516@Configurationpublic class UserServiceConfig &#123; public void init() &#123; System.out.println(\"this is init method.\"); &#125; public void destroy() &#123; System.out.println(\"this is destroy method.\"); &#125; @Bean(initMethod=\"init\", destoryMethod=\"destroy\") public UserServiceImpl userService() &#123; return new UserServiceImpl(); &#125;&#125; @Scope @Scope注解可以用来定义@Component标注的类的作用范围以及@Bean所标记的类的作用范围。 @Scope所限定的作用范围有：singleton、prototype、request、session、globalSession或者其他的自定义范围。这里以prototype为例子进行讲解。当一个Spring Bean被声明为prototype（原型模式）时，在每次需要使用到该类的时候，Spring IoC容器都会初始化一个新的改类的实例。在定义一个Bean时，可以设置Bean的scope属性为prototype：scope=“prototype”,也可以使用@Scope注解设置，如下： @Scope(value=ConfigurableBeanFactory.SCOPE_PROPTOTYPE) 代码示例： 123456789101112131415@Service@Scope(value=ConfigurableBeanFactory.SCOPE_PROPTOTYPE)public class UserServiceImpl &#123; // ...&#125;@Configurationpublic class UserServiceConfig &#123; @Bean @Scope(value=ConfigurableBeanFactory.SCOPE_PROPTOTYPE) public UserServiceImpl userService() &#123; return new UserServiceImpl(); &#125;&#125; @Scope 单例模式 当@Scope的作用范围设置成Singleton时，被此注解所标注的类只会被Spring IoC容器初始化一次。在默认情况下，Spring IoC容器所初始化的类实例都为singleton。同样的原理，此情形也有两种配置方式，示例代码如下： 123456789101112131415@Service@Scope(ConfigurableBeanFactory.SCOPE_SINGLETON)public class UserServiceImpl &#123; // ...&#125;@Configurationpublic class UserServiceConfig &#123; @Bean @Scope(ConfigurableBeanFactory.SCOPE_SINGLETON) public UserServiceImpl userService() &#123; return new UserServiceImpl(); &#125;&#125; 容器配置注解 @Autowired @Autowired注解用于标记Spring将要解析和注入的依赖项。此注解可以作用在构造函数、字段和setter方法上。 作用于构造函数 下面是@Autowired注解标注构造函数的使用示例： 12345678910@RestControllerpublic class UserController &#123; private UserService userService; @Autowired public UserController(UserService userService) &#123; this.userServic = userservice; &#125;&#125; 作用于setter方法 下面是@Autowired注解标注setter方法的示例代码： 12345678910@RestControllerpublic class UserController &#123; private UserService userService; @Autowired public void setUserService(UserService userService) &#123; this.userServic = userservice; &#125;&#125; 作用于字段 @Autowired注解标注字段是最简单的，只需要在对应的字段上加入此注解即可，示例代码如下： 1234567@RestControllerpublic class UserController &#123; @Autowired private UserService userService; // ...&#125; @Primary 当系统中需要配置多个具有相同类型的bean时，@Primary可以定义这些Bean的优先级。下面将给出一个实例代码来说明这一特性： 123456789101112131415161718192021222324252627282930313233343536373839public interface MessageService &#123; String sendMessage(String message);&#125;@Componentpublic class RabitMQMessageImpl implements MessageService &#123; @Override public String sendMessage(String ms) &#123; return \"this is RabitMQ message\"; &#125;&#125;@Componentpublic class KafkaMessageImpl implements MessageService &#123; @Override public String sendMessage(String ms) &#123; return \"this is Kafka message\"; &#125;&#125;@Primary@Componentpublic class ActiveMQMessageImpl implements MessageService &#123; @Override public String sendMessage(String ms) &#123; return \"this is ActiveMQ message\"; &#125;&#125;@RestControllerpublic class MessageController &#123; @Autowired private MessageService messageService; @GetMapping(\"/info\") public String info () &#123; return messageService.sendMessage(); // this is ActiveMQ message &#125;&#125; @PostConstruct与@PreDestroy 值得注意的是，这两个注解不属于Spring,它们是源于JSR-250中的两个注解，位于common-annotations.jar中。@PostConstruct注解用于标注在Bean被Spring初始化之前需要执行的方法。@PreDestroy注解用于标注Bean被销毁前需要执行的方法。下面是具体的示例代码： 12345678910111213141516@Componentpublic class DemoComponent &#123; private List&lt;String&gt; list = new ArrayList&lt;&gt;(); @PostConstruct public void init() &#123; list.add(\"aaa\"); list.add(\"bbb\"); list.add(\"ccc\"); &#125; @PreDestroy public void destory() &#123; list.clear(); &#125;&#125; @Qualifier 当系统中存在同一类型的多个Bean时，@Autowired在进行依赖注入的时候就不知道该选择哪一个实现类进行注入。此时，我们可以使用@Qualifier注解来微调，帮助@Autowired选择正确的依赖项。下面是一个关于此注解的代码示例： 123456789101112131415161718192021222324252627282930313233343536373839public interface MessageService &#123; String sendMessage(String message);&#125;@Service(\"emailService\")public class EmailServiceImple implements MessageService &#123; @Override public String sendMessage(String ms) &#123; return \"send email, message is \" + ms; &#125;&#125;@Service(\"smsService\")public class SMSServiceImpl implements MessageService &#123; @Override public String sendMessage(String ms) &#123; return \"send sms, message is \" + ms; &#125;&#125;public interface MessageProcessor &#123; String processMessage(String ms);&#125;public class MessageProcessorImpl implements MessageProcessor &#123; private MessageService messageService; @Autowired @Qualifier(\"emailService\") public void setMessageService(MessageService ms) &#123; messageService = ms; &#125; @Override public String processMessage(String message) &#123; return messageService.sendMessage(message); &#125;&#125; Spring Boot注解 @SpringBootApplication @SpringBootApplication注解是一个快捷的配置注解，在被它标注的类中，可以定义一个或多个Bean，并自动触发自动配置Bean和自动扫描组件。 此注解相当于@Configuration、@EnableAutoConfiguration和@ComponentScan的组合。在Spring Boot应用程序的主类中，就使用了此注解。示例代码如下： 123456@SpringBootApplicationpublic class Application&#123; public static void main(String [] args)&#123; SpringApplication.run(Application.class,args); &#125;&#125; @EnableAutoConfiguration @EnableAutoConfiguration注解用于通知Spring，根据当前类路径下引入的依赖包，自动配置与这些依赖包相关的配置项。 12345678910111213141516@SpringBootConfiguration@EnableAutoConfiguration@ComponentScan@EnableTransactionManagement@EnableWebSocketMessageBrokerpublic class AppRun &#123; public static void main(String[] args) &#123; SpringApplication.run(AppRun.class, args); &#125; @Bean public SpringContextHolder springContextHolder() &#123; return new SpringContextHolder(); &#125;&#125; @ConditionalOnClass与@ConditionalOnMissingClass 这两个注解属于类条件注解，它们根据是否存在某个类作为判断依据来决定是否要执行某些配置。下面是一个简单的示例代码： 12345@Configuration@ConditionalOnClass(DataSource.class)class MySQLAutoConfiguration &#123; //...&#125; @ConditionalOnBean与@ConditionalOnMissingBean 这两个注解属于对象条件注解，根据是否存在某个对象作为依据来决定是否要执行某些配置方法。示例代码如下： 1234567891011@Bean@ConditionalOnBean(name=\"dataSource\")LocalContainerEntityManagerFactoryBean entityManagerFactory()&#123; //...&#125;@Bean@ConditionalOnMissingBeanpublic MyBean myBean()&#123; //...&#125; @ConditionalOnProperty @ConditionalOnProperty注解会根据Spring配置文件中的配置项是否满足配置要求，从而决定是否要执行被其标注的方法。示例代码如下： 12345@Bean@ConditionalOnProperty(name=\"myapp\",havingValue=\"on\")App myapp()&#123; return new App();&#125; @ConditionalOnResource 此注解用于检测当某个配置文件存在使，则触发被其标注的方法，下面是使用此注解的代码示例： 1234@ConditionalOnResource(resources = \"classpath:website.properties\")Properties addWebsiteProperties()&#123; //...&#125; @ConditionalOnWebApplication与@ConditionalOnNotWebApplication 这两个注解用于判断当前的应用程序是否是Web应用程序。如果当前应用是Web应用程序，则使用Spring WebApplicationContext，并定义其会话的生命周期。示例： 1234@ConditionalOnWebApplicationHealthCheckController healthCheckController()&#123; //...&#125; @ConditionalExpression 此注解可以让我们控制更细粒度的基于表达式的配置条件限制。当表达式满足某个条件或者表达式为真的时候，将会执行被此注解标注的方法。 12345@Bean@ConditionalException(\"$&#123;localstore&#125; &amp;&amp; $&#123;local == 'true'&#125;\")LocalFileStore store()&#123; //...&#125; @Conditional @Conditional注解可以控制更为复杂的配置条件。在Spring内置的条件控制注解不满足应用需求的时候，可以使用此注解定义自定义的控制条件，以达到自定义的要求。下面是使用该注解的简单示例： 1234@Conditioanl(CustomConditioanl.class)CustomProperties addCustomProperties()&#123; //...&#125;","categories":[{"name":"Java","slug":"Java","permalink":"https://www.kming6.com/categories/Java/"},{"name":"Spring Boot","slug":"Java/Spring-Boot","permalink":"https://www.kming6.com/categories/Java/Spring-Boot/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.kming6.com/tags/Java/"},{"name":"Spring","slug":"Spring","permalink":"https://www.kming6.com/tags/Spring/"},{"name":"Spring Boot","slug":"Spring-Boot","permalink":"https://www.kming6.com/tags/Spring-Boot/"},{"name":"SpringMVC","slug":"SpringMVC","permalink":"https://www.kming6.com/tags/SpringMVC/"},{"name":"Spring Bean","slug":"Spring-Bean","permalink":"https://www.kming6.com/tags/Spring-Bean/"},{"name":"注解","slug":"注解","permalink":"https://www.kming6.com/tags/注解/"}]},{"title":"script标签中的属性解析","slug":"script标签中的属性解析","date":"2019-12-25T22:05:51.000Z","updated":"2020-06-06T07:48:46.196Z","comments":true,"path":"posts/13123/","link":"","permalink":"https://www.kming6.com/posts/13123/","excerpt":"使用Script标签导入JS的时候，偶尔会看到标签中带有async、defer、integrity、crossorigin和onerror的属性，一时好奇就花时间研究了一下。","text":"使用Script标签导入JS的时候，偶尔会看到标签中带有async、defer、integrity、crossorigin和onerror的属性，一时好奇就花时间研究了一下。 没有任何属性的script导入JS代码的HTML代码 1&lt;script src=\"app.js\"&gt;&lt;/script&gt; 没有添加 async、defer 等任何属性时，浏览器会按照顺序解析HTML文档，当解析到JS时，会立即执行JS代码，阻止后面文档的解析,如果JS代码中有操作相关HTML文档代码，JS会由于解析不到该HTML文档而报错。 12345&lt;script src=\"a.js\"&gt;&lt;/script&gt;&lt;script&gt; console.log('b')&lt;/script&gt;&lt;script src=\"c.js\"&gt;&lt;/script&gt; 浏览器在解析到上面的 script 标签时会阻止 HTML 页面文档解析，并行的下载 a.js, c.js，依次执行 a.js, console.log(‘b’), c.js 后，才会继续解析渲染后续的页面文档。这也是为什么你会经常看到一些建议，需要将 DOM 操作的 js 要放在 body 标签的最后，原因就是不阻塞 HTML 文档的解析，使页面更快的渲染在浏览器上。 async属性 async 只适用于外部链接的脚步文件，内联JS文件不起作用，规定脚本异步加载 加载过程不会阻塞HTML页面解析 加载完成会立即执行，执行时将阻塞HTML页面解析 先下载完成先执行 由于加载时间的长短不一致，执行的顺序可能不会按照文档顺序执行 执行JS的时候，可能HTML还没有解析完 1&lt;script async src=\"app.js\"&gt;&lt;/script&gt; 带 async 的 script 标签，加载和渲染后续文档元素的过程将和脚本的加载并行进行（异步加载JS代码），但JS脚本的加载完成后会马上执行，而JS执行时会阻塞 HTML 文档的解析。 兼容性：async attribute for external scripts defer属性 defer 只适用于外部链接的脚步文件，内联JS文件不起作用，规定脚本延迟执行 不会阻塞HTML页面的解析 在 HTML 解析完成后, DOMContentLoaded 事件之前执行 会按照JS脚本出现的顺序依次执行 1&lt;script defer src=\"app.js\"&gt;&lt;/script&gt; 加上 defer 属性的 script 标签，加载后续HTML文档元素的过程和脚本的加载过程并行进行（异步），和 async 属性不同的是，defer 属性脚本会在所有元素解析完成之后才执行，在 DOMContentLoaded 事件触发之前完成。 兼容性：defer attribute for external scripts async 和 defer 属性的区别 defer 和 async 都是并行加载的，不同的是加载完成后的执行时机。 async 属性的脚本在它加载结束就会立刻执行，因加载时间的不同，所以可能出现脚本执行顺序不一致的情况 每一个 defer 属性的脚本会在 HTML 文档解析完成后, DOMContentLoaded 事件之前执行，按照 DOM 中的顺序执行 defer 和 async 都只适用于外部链接的脚本文件，对与内联的 script 标签没有作用 type=module 的 script 标签 相比一般 script ，&lt;script type=&quot;module&quot;&gt;&lt;/script&gt; 将被当作一个 JavaScript 模块对待，不受 charset 和 defer 属性影响，称为 module script。 123456789101112// app.jsimport &#123; assign &#125; from \"./utils.js\"var obj = Object.create( &#123; foo: 'a' &#125;, &#123; baa: &#123; value: 'b' &#125;, bab: &#123; value: 'c' &#125; &#125;,)var cp = assign(&#123;&#125;, obj)console.log(cp) 12&lt;script type=\"module\" src=\"app.js\"&gt;&lt;/script&gt;&lt;script nomodule src=\"foo.js\"&gt;&lt;/script&gt; 关于type=module，可以这么理解： 支持 module script 的浏览器，不会执行拥有 nomodule 属性的脚本 不支持 module script 的浏览器，会忽略未知的 type=”module” 的 script，同时也会忽略传统 script 中不认识的 nomodule 属性，进而执行常规的 foo.js 代码 module script 以及其依赖所有文件（源文件中通过 import 声明导入的文件）都会被下载，一旦整个依赖的模块树都被导入，页面文档也完成解析，app.js 将会被执行 但是如果 module script 里有 async 属性，比如 &lt;script type=&quot;module&quot; src=&quot;util.js&quot; async&gt;&lt;/script&gt; ，module script 及其所有依赖都会异步下载，等待整个依赖的模块树都被导入时就会立即执行，此时页面有可能还没有完成解析渲染。 兼容性：JavaScript modules via script tag 参考图片(图片取自互联网) 根据图片总结： 使用 &lt;script&gt; ，脚本下载和执行会阻塞 HTML 文档的解析。 使用 &lt;script defer&gt; ，脚本下载与 HTML 解析并行，等 HTML 解析完成后没脚本都会有序执行。 使用 &lt;script async&gt; ，脚本下载与 HTML 解析并行，但一旦脚本加载完成，就会中断 HTML 解析，开始执行脚本。 &lt;script type =&quot;module&quot;&gt; 的行为类似于 &lt;script defer&gt; ，但是模块依赖关系也会被下载， &lt;script type =&quot;module&quot; async&gt; 的行为类似于 &lt;script async&gt;，额外的模块依赖关系也会被下载。 integrity 属性1&lt;script crossorigin=\"anonymous\" src=\"//instant.page/3.0.0\" type=\"module\" defer integrity=\"sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1\"&gt;&lt;/script&gt; integrity 属性是资源完整性规范的一部分，它允许你为 script 提供一个 hash，用来进行验签，检验加载的JavaScript 文件是否完整。 上面的代码，integrity为一个hash值，用来告诉浏览器，使用sha256签名算法对下载的js文件进行计算，并与intergrity提供的摘要签名对比校验，如果二者不一致，就不会执行这个资源。 intergrity 的作用： 减少由托管在CDN的资源被篡改而引入的XSS的风险 减少通信过程资源被篡改而引入的XSS风险（同时使用https会更保险） 可以通过一些技术手段，不执行有脏数据的CDN资源，同时去源站下载对应资源 crossorigin 属性crossorigin 的属性值可以是 anonymous、use-credentials，如果没有属性值或者非法属性值，会被浏览器默认做anonymous。 crossorigin的作用有三个： crossorigin 会让浏览器启用CORS访问检查，检查http相应头的 Access-Control-Allow-Origin 对于传统 script 需要跨域获取的js资源，控制暴露出其报错的详细信息 对于 module script ，控制用于跨域请求的凭据模式 onerror 属性 JavaScript运行时的错误（抛出的语法错误和异常）发生时，实现了ErrorEvent接口的error事件在window上触发，并且调用window.onerror(或者window.addEventListener(‘error’, callback))的回调函数 当资源（如 &lt;img&gt; 或 &lt;script&gt; ）无法加载，或者启用SRI策略资源不完整时，使用Event接口的error事件在会在该资源元素处触发，元素上的 onerror 回调函数被调用 script 标签与 innerHTML通过 innerHTML 动态添加到页面上的 script 标签则不会被执行 在收集错误日志的时候，通常会在window上注册一个方法来监测所有代码抛出的异常： 123456789101112131415161718window.addEventListener('error', function(msg, url, lineno, colno, error) &#123; var string = msg.toLowerCase() var substring = \"script error\" if (string.indexOf(substring) &gt; -1)&#123; alert('Script Error: See Browser Console for Detail') &#125; else &#123; var message = &#123; Message: msg, URL: url, Line: lineNo, Column: columnNo, 'Error object': JSON.stringify(error) &#125; // send error log to server record(message) &#125; return false&#125;) 但是对于跨域js来说，只会给出很少的报错信息：’error: script error’，通过使用 crossorigin 属性可以使跨域js暴露出跟同域js同样的报错信息。但是，资源服务器必须返回一个 Access-Control-Allow-Origin 的header，否则资源无法访问。 动态导入script(Dynamically importing scripts) 123456789101112function loadError (error) &#123; throw new URIError(`The script $&#123;error.target.src&#125; is not accessible.`)&#125;function importScript (src, onLoad) &#123; var script = document.createElement('script') script.onerror = loadError script.async = false if (onLoad) &#123; script.onload = onLoad &#125; document.header.appendChild(script) script.src = src&#125; 可以上面的方法动态加载js资源，但是要注意的是，默认 append 到文档中的 script 会异步执行（可以理解为默认拥有 async 属性，如果需要加载的js按顺序执行，需要设置 async 为 false ）","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.kming6.com/categories/JavaScript/"}],"tags":[{"name":"script标签","slug":"script标签","permalink":"https://www.kming6.com/tags/script标签/"}]},{"title":"Vim入门指南","slug":"Vim入门指南","date":"2019-11-23T08:52:48.000Z","updated":"2020-06-06T07:48:46.196Z","comments":true,"path":"posts/25813/","link":"","permalink":"https://www.kming6.com/posts/25813/","excerpt":"Vim是一款很老的编辑器，但时至今日还非常流行，以前的Dreamweaver、Sublime Text到现在的VS code、Hbuilder，不少编辑器都有Vim的插件，可以支持Vim的使用方式。而且现在服务器上的编辑基本都默认带有Vim，不可能有其他图形化的编辑器，所以学习了解Vim还是很有必要的。","text":"Vim是一款很老的编辑器，但时至今日还非常流行，以前的Dreamweaver、Sublime Text到现在的VS code、Hbuilder，不少编辑器都有Vim的插件，可以支持Vim的使用方式。而且现在服务器上的编辑基本都默认带有Vim，不可能有其他图形化的编辑器，所以学习了解Vim还是很有必要的。 vi/vim 的基本使用基本上 vi/vim 共分为三种模式，分别是命令模式（Command/normal mode），输入/插入模式（Insert mode）和底线命令模式（Last line mode）。 这三种模式的作用分别是： Vim进入编辑模式的方式 i (insert)光标前输入 a (append)光标后追加输入 o (open a line below)光标下一行输入 A (append after line)光标所在行末尾输入 I (insert before line)光标所在行行首输入 O (append line above)光标所在行上一行输入 Vim编辑模式小技巧Vim设置123456# 打开语法高亮:syntax on# 打开搜索高亮(highlight search):set hls# 打开增量搜索:set incsearch 如何快速纠错 ctrl + h删除上一个字符 ctrl + w删除上一个单词 ctrl + u删除当前行 Vim快速移动 h左移 j下移 k上移 l右移 在单词间切换 w/W 移动到下一个word/WORD开头，e/E移动到下一个word/WORD结尾 b/B 回到上一个word/WORD开头，可以理解为backword word指的是以非空白符分割的单词，WORD以空白符分割的单词 行间搜索移动 同一行快速移动的方式是搜索一个字符并且快速移动到该字符 使用f{char}可以移动到char字符上，t移动到char的前一个字符 如果第一次没搜到，可以用分号(;)/逗号(,)继续搜索该行下一个/上一个 F表示反过来搜索前面的字符 Vim水平移动 0移动到行首第一个字符，^移动到第一个非空白字符 $移动到行尾，g_移动到行尾非空白字符 常用的0和$就可以满足日常需求 Vim垂直移动 可以安装easy-motion插件移动 使用括号()在句子间移动 使用{}在段落间移动 :help可以查看帮助 页面移动 gg/G移动到文件开头和结尾 Ctrl + o快速返回 H/M/L跳转到屏幕的开头(Head)，中间(Middle)和结尾(Lower) Ctrl + u. Ctrl + f. 上下翻页。(upword/forward)。zz置屏幕到中间。 Vim快速增删改查Vim新增 i (insert)光标前输入 a (append)光标后追加输入 o (open a line below)光标下一行输入 A (append after line)光标所在行末尾输入 I (insert before line)光标所在行行首输入 O (append line above)光标所在行上一行输入 Vim删除 vim在normal模式下使用x删除一个字符 使用d(delete)配合文本对象删除一个单词daw/diw(不包含单词后的空白)/dw(delete around word) dd删除一行 dt{char}删除到x的内容(delete to char) d0删除到行首，d$删除到行尾 d和x配合数字来执行多次 2dd删除两行，4x删除4个字符 Vim修改 常用r(replace)，c(change)，s(substitute) normal模式下使用r替换一个字符。s替换一个字符并进入插入模式(编辑模式) 4s删除4个字符并进入插入模式 使用c配合文本对象快速进行修改 R(修改光标位置的字符，覆盖掉旧的字符) S(删除光标行，并进入编辑模式) caw/cw/ciw(删除当前单词，并进入编辑模式) C(删除到行尾，并进入编辑模式) ct{char}(删除到char字符，并进入编辑模式) Vim查询 使用/或者?进行先前或反向搜索 使用n/N跳转到下一个或者上一个匹配 使用*或者#进行当前单词的向前和向后匹配 Vim搜索替换 substitute命令允许查找并替换掉文本，且支持正则表达式 123:[range]s[ubstitute]/&#123;pattern&#125;/&#123;string&#125;/[flags]# 将word单词替换成replace(不包含w_word类型):% s/\\&lt;word\\&gt;/replace/g range表示范围，如：10,20表示10-20行，%表示全部 pattern是要替换的模式，string是替换后的字符文本 flags常用的标志 g(global)表示全局范围执行 c(confirm)表示确认，可以确认或者拒绝修改 n(number)报告匹配到的次数而不替换，可以查询匹配次数 Vim多文件操作 多文件操作相关名词 Buffer是指打开一个文件的内存缓冲区 Window(窗口)是Buffer可视化的分割区域 Tab可以组织窗口为一个工作区 Vim的Buffer缓冲区 Vim打开一个文件后会加载文件内容到缓冲区 之后的修改都是针对内存中的缓冲区，并不会直接保存到文件磁盘 直到在命令模式执行:w(write)的时候才会把修改内容写入到文件里 buffer之间切换 使用:ls会列举当前的缓冲区 使用:b n跳转到第n个缓冲区 :bpre 上一个 :bnext 下一个 :bfirst 第一个 :blast 最后一个 用:b buffer_name加上tab补全来跳转 Vim的Window窗口 Vim窗口是可视化的分割区域 一个缓冲区可以分割成多个窗口，每个窗口可以打开不同的缓冲区 命令 用途 &lt; Ctrl + w &gt; s 水平分割，或者:sp &lt; Ctrl + w &gt; v 垂直分割，或者:vs &lt; Ctrl + w &gt; w 在窗口间循环切换 &lt; Ctrl + w &gt; h 切换到左边窗口 &lt; Ctrl + w &gt; j 切换到下边窗口 &lt; Ctrl + w &gt; k 切换到上边窗口 &lt; Ctrl + w &gt; l 切换到右边窗口 &lt; Ctrl + w &gt; = 使所有窗口登高、等宽 &lt; Ctrl + w &gt; _ 最大化活动窗口的高度 &lt; Ctrl + w &gt; | 最大化活动窗口的宽度 [N]&lt; Ctrl + w &gt; _ 把活动窗口的高度设为[N]行 [N]&lt; Ctrl + w &gt; | 把活动窗口的宽度设为[N]列 Vim的Tab(标签页)将窗口分组 Vim的Tab是可以容纳一系列窗口的容器(:h tabpage) Vim的Tab和其他编辑器不太一样，可以比喻成Linux的虚拟桌面 比如一个Tab全用来编辑Python文件，一个Tab全是HTML文件 相比窗口，Tab一般用的比较少，Tab太多管理比较麻烦 Tab(标签页)操作 Tab使用不多，简单了解常用的操作 命令 用途 :tabe[dit] {filename} 在新标签页中大开{filename} &lt; Ctrl + w &gt;T 把当前窗口移动到一个新标签页 :tabc[lose] 关闭当前标签页及其中的所有窗口 :tabo[nly] 只保留活动标签页，关闭所有其他标签页 如何切换不同的标签页，一般两个就好，太多反而操作繁琐 EX命令 普通模式命令 用途 :tabn[ext] {N} {N}gt 切换到编号为{N}的标签页 :tabn[ext] gt 切换到下一标签页 :tabp[revious] gT 切换到上一标签页 Vim的复制粘贴与寄存器normal模式下复制粘贴 normal模式下复制粘贴分别使用y(yank)和p(put)，剪贴d和p 使用v(visual)命令选中所要复制的地方，然后使用p粘贴 配合文本对象:比如使用yiw复制一个单词，yy复制一行 Vim里的剪贴(cut)复制(copy)粘贴(paste)分别是delete/yank/put insert模式下复制粘贴 和平常文本编辑器差不多，但粘贴可能会有缩进问题 :set autoindent设置自动缩进，代码粘贴缩进还是错乱 使用:set paste后粘贴，代码错乱解决，自动缩进没了，:set nopaste后恢复 Vim的寄存器 Vim里操作的是寄存器而不是系统剪贴板，和其他编辑器不同 默认使用d删除或者y复制的内容都放到无名寄存器 用x删除一个字符放到无名寄存器，然后p粘贴，可调换俩字符位置 Vim不使用单一的剪贴板进行剪贴、复制与粘贴，而是多组寄存器 通过&quot;{register}前缀可以指定寄存器，不指定默认用无名寄存器 使用&quot;ayiw复制一个单词到寄存器a中，&quot;bdd删除当前行到寄存器b中 Vim中 &quot;&quot;表示无名寄存器，缺省使用。&quot;&quot;p等同于p 除了有名的寄存器a-z，Vim中还有一些其他常见寄存器 复制专用寄存器&quot;0使用y复制文本的同时会被拷贝到复制寄存器0 系统剪贴板&quot;+可以在复制前加上&quot;+复制到系统剪贴板 其他寄存器如&quot;%当前文件名，&quot;.上次插入的文本 查看是否支持系统剪贴板 1234# 输出：1支持0不支持:echo has('clipboard')# 设置vim直接复制粘贴系统剪贴板内容:set clipboard=unnamed Vim强大的宏(macro) - Vim的批量编辑 宏可以看出是一系列命令的集合 可以使用宏录制一系列操作，然后回放 宏可以非常方便把一系列命令用在多文本上 如何使用宏 Vim使用q来录制，同时也是使用q结束录制 使用q{register}选择要保存的寄存器，把录制命令保存其中 使用@{register}回放寄存器中保存的一系列命令 Vim的补全 补全是根据当前环境上下文由编辑器猜你想输入的东西 如补全一个单词、文件名，或者代码中的函数名、变量名等 Vim中提供了多种补全功能，还可以由插件拓展功能实现代码补全 Vim中有很多种补全方式 命令 补全类型 &lt; Ctrl - n &gt; 补全关键字 &lt; Ctrl - x &gt; &lt; Ctrl - n &gt; 当前缓冲区关键字 &lt; Ctrl - x &gt; &lt; Ctrl - i &gt; 包含文件关键字 &lt; Ctrl - x &gt; &lt; Ctrl - j &gt; 标签文件关键字 &lt; Ctrl - x &gt; &lt; Ctrl - k &gt; 字典查找 &lt; Ctrl - x &gt; &lt; Ctrl - l &gt; 整行补全 &lt; Ctrl - x &gt; &lt; Ctrl - f &gt; 文件名补全 &lt; Ctrl - x &gt; &lt; Ctrl - o &gt; 全能(Omni)补全 常见的有以下几种类型: 使用 ctrl + n 和 ctrl + p 补全单词 使用 ctrl + x 和 ctrl + f 补全文件名 使用 ctrl + x 和 ctrl + o 补全代码，需要开启文件类型检查，安装插件 插入文件名 1:r! echo % 插入文件名全路径 1:r! echo %:p more info 12:help read:help filename-modifiers 给Vim更换配色 使用：colorscheme显示当前的主题配色，默认default 使用：colorscheme &lt;ctrl+d&gt; 可以显示所有的配色 用：colorscheme 配色名，就可以修改配色 GitHub配色 Vim的配置 Vim里非常常用的设置，如：set number设置行号 底线命令模式的配置都是Vim里临时设置，没法持久化 Vimrc提供了一种持久化配置的方式 编写Vim配置文件 Liunx/Unix下新建一个隐藏文件vim ~/.vimrc windows系统vim $MYVIMRC，通过环境变量编辑配置文件 Vim相关配置 常用设置，如:set nu设置行号，colorscheme hybrid设置主题 常用Vim映射，比如noremap &lt; leader &gt;w : w&lt; cr &gt; 保存文件 自定义vimscript函数和插件配置 vimrc配置参考 1234567891011121314151617181920212223242526272829303132333435363738394041424344\" 常用设置\" 设置行号set numbercolorscheme hybrid\" 按F2进入粘贴模式set pastetoggle=&lt;F2&gt;\" 高亮搜索set hlsearch\" 设置折叠方式set foldmethod=indent\" 一些方便的映射let mapleader=\",\"let g:mapleader=\",\"\" 使用 jj 进入normal模式，`^表示上一次编辑模式的位置，这里进入normal模式保持光标不变inoremap jj &lt;Esc&gt;`^\" 使用 leader+w 直接保存inoremap &lt;leader&gt;w &lt;Esc&gt;:w&lt;cr&gt;noremap &lt;leader&gt;w :w&lt;cr&gt;\" 切换 buffernnoremap &lt;silent&gt; [b :bprevious&lt;CR&gt;nnoremap &lt;silent&gt; [n :bnext&lt;CR&gt;\" 用 ctrl+h/j/k/l swith windownoremap &lt;C-h&gt; &lt;C-w&gt;hnoremap &lt;C-j&gt; &lt;C-w&gt;jnoremap &lt;C-k&gt; &lt;C-w&gt;knoremap &lt;C-l&gt; &lt;C-w&gt;l\" sudo方式写入cnoremap w!! w !sudo tee % &gt;/dev/null\" json格式化com! FormatJSON %!python3 -m json.tool\" 插件设置，这里使用了vim-plugcall plug#begin('~/.vim/plugged')\" 安装插件只需要把 Github 地址放到这里重启后执行 :PlugInstallPlug 'mhinz/vim-startify'Plug 'scrooloose/nerdtrre'call plug#end() 12# 查看vim所有设置选项:h option-list Vim中的映射(修改默认快捷键配置) Vim中映射复杂，源于vim有多种模式 设置leader键let mapleader = “,” 常用逗号或者空格 用inoremap &lt;leader&gt;w &lt;Esc&gt;:w&lt;cr&gt; 在插入模式保存 基本映射 使用map，如:map - x然后按-就会删除字符 :map &lt;sapce&gt; viw 映射vim空格选中整个单词 :map &lt;c-d&gt; dd 就可以使用ctrl + d执行dd删除一行 :unmap -取消-的映射 常用模式normal/visual/insert模式定义映射 用nmap/vmap/imap定义映射只在normal/visual/insert模式分别有效 :vmap \\ U把在visual模式下选中的文本大小(u/U转换大小写) 递归解释，\\将删除整行 12:nmap - dd:nmap \\ - 非递归映射 使用nnoremap/vnoremap/inoremap映射 尽量全部使用非递归映射 Vim如何安装插件 直接通过clone插件代码,选择一个插件管理器 常见的有vim-plug，Vundle，Pathogen，Dein.Vim，volt等 推荐vim-plug vim-plug插件安装 vim-plug GitHub地址 Unix安装 12curl -fLo ~/.vim/autoload/plug.vim --create-dirs \\ https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim Windows (PowerShell)安装 12345678md ~\\vimfiles\\autoload$uri = 'https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'(New-Object Net.WebClient).DownloadFile( $uri, $ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath( \"~\\vimfiles\\autoload\\plug.vim\" )) .vimrc中配置示例 12345678910111213141516171819202122232425262728293031323334353637\" Specify a directory for plugins\" - For Neovim: stdpath('data') . '/plugged'\" - Avoid using standard Vim directory names like 'plugin'call plug#begin('~/.vim/plugged')\" Make sure you use single quotes\" Shorthand notation; fetches https://github.com/junegunn/vim-easy-alignPlug 'junegunn/vim-easy-align'\" Any valid git URL is allowedPlug 'https://github.com/junegunn/vim-github-dashboard.git'\" Multiple Plug commands can be written in a single line using | separatorsPlug 'SirVer/ultisnips' | Plug 'honza/vim-snippets'\" On-demand loadingPlug 'scrooloose/nerdtree', &#123; 'on': 'NERDTreeToggle' &#125;Plug 'tpope/vim-fireplace', &#123; 'for': 'clojure' &#125;\" Using a non-master branchPlug 'rdnetto/YCM-Generator', &#123; 'branch': 'stable' &#125;\" Using a tagged release; wildcard allowed (requires git 1.9.2 or above)Plug 'fatih/vim-go', &#123; 'tag': '*' &#125;\" Plugin optionsPlug 'nsf/gocode', &#123; 'tag': 'v.20150303', 'rtp': 'vim' &#125;\" Plugin outside ~/.vim/plugged with post-update hookPlug 'junegunn/fzf', &#123; 'dir': '~/.fzf', 'do': './install --all' &#125;\" Unmanaged plugin (manually installed and updated)Plug '~/my-prototype-plugin'\" Initialize plugin systemcall plug#end() 重新加载source .vimrc并且在vim命令行执行:PlugInstall安装插件. 推荐vim插件 vim-startify修改启动界面 vim-airline状态栏美化 indentline增加代码缩进线条 hybird配色 solarized配色 gruvbox配色 ctrlp模糊搜索文件并打开 easymotion移动跳转插件 surround快速编辑成对的符号 fzf模糊搜索工具 far搜索替换工具 vim-go golang语言插件 python-mode python语言插件 tagbar代码大纲浏览插件 interestingwords高亮变量单词 deoplete异步代码补全 coc强大的neovim/vim8补全插件，LSP支持 neoformat代码格式化插件 autoformat格式化插件 neomake静态检查插件 ale静态检查lint插件 commentary快速注释插件 fugitive vim的git插件 vim-gitgutter vim显示文件改动 gv命令行查看提交记录 Vim配置推荐 SpaceVim vim-config 如何搜寻vim插件 搜索引擎搜索查找插件 Vim Awesome 网上开源的vim配置借鉴想要的插件","categories":[{"name":"Vim","slug":"Vim","permalink":"https://www.kming6.com/categories/Vim/"}],"tags":[{"name":"Vim","slug":"Vim","permalink":"https://www.kming6.com/tags/Vim/"},{"name":"Vi","slug":"Vi","permalink":"https://www.kming6.com/tags/Vi/"}]},{"title":"git常用操作和问题总结","slug":"git常用操作命令","date":"2019-11-19T22:28:51.000Z","updated":"2020-06-06T07:48:46.196Z","comments":true,"path":"posts/19017/","link":"","permalink":"https://www.kming6.com/posts/19017/","excerpt":"","text":"我们首先将一个已存在的 Git 仓库添加为正在工作的仓库的子模块。 你可以通过在 git submodule add 命令后面加上想要跟踪的项目 URL 来添加新的子模块。 例如添加一个名为 “Connector” 的库。 1234567$ git submodule add https://github.com/xxx/ConnectorCloning into &apos;DbConnector&apos;...remote: Counting objects: 11, done.remote: Compressing objects: 100% (10/10), done.remote: Total 11 (delta 0), reused 11 (delta 0)Unpacking objects: 100% (11/11), done.Checking connectivity... done. 2、每次更新.gitmodules文件, 必须同步下(git submodule sync), 否则识别不到. 3、如何为一个项目添加一个子项目呢? git submodule add 项目地址, 然后push到你的远程仓库(如gitlab/github)，你可以在项目里看到“子项目名+@+序列号”的链接. 4、如何删除submodule呢? 1git rm &lt;submodule-name&gt; || git submodule deinit &lt;submodule-name&gt; 5、一旦依赖的子项目过多(比如80个), 该如何批量操作呢? 1234git submodule foreach &lt;command&gt; eg: git submodule foreach git checkout master# 该命令会按照.gitmodules里的path寻找所有的三方模块,并在每一个模块中都执行foreach后的命令eg: git submodule foreach git submodule update 6、更新了子项目, 那么父项目也需要更新. 即子项目属于父项目的一部分, 在子项目commit后, 父也需要. 7、如何将一个包含子项目的项目所有内容都clone下来呢? 1234git clone https://xxx.xxx.xxx/xxx/xxx.gitgit submodule init &amp;&amp; git submodule update# 下面这一句的效果和上面三条命令的效果是一样的,多加了个参数 `--recursive`git clone https://xxx.xxx.xxx/xxx/xxx.git --recursive 参考链接","categories":[{"name":"Git","slug":"Git","permalink":"https://www.kming6.com/categories/Git/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://www.kming6.com/tags/Git/"}]},{"title":"配置虚拟机桥接模式网络","slug":"配置虚拟机桥接模式网络","date":"2019-11-14T21:01:14.000Z","updated":"2020-06-06T07:48:46.196Z","comments":true,"path":"posts/4143/","link":"","permalink":"https://www.kming6.com/posts/4143/","excerpt":"虚拟机CentOS7系统桥接模式网络配置。","text":"虚拟机CentOS7系统桥接模式网络配置。 配置ip地址等信息在/etc/sysconfig/network-scripts/ifcfg-eth0文件(可能文件名不一样，和网卡名有关)1vim /etc/sysconfig/network-scripts/ifcfg-eth0 修改如下： 123456789TYPE=&quot;Ethernet&quot; # 网络类型为以太网BOOTPROTO=&quot;static&quot; # 手动分配ipNAME=&quot;eth0&quot; # 网卡设备名，设备名一定要跟文件名一致DEVICE=&quot;eth0&quot; # 网卡设备名，设备名一定要跟文件名一致ONBOOT=&quot;yes&quot; # 该网卡是否随网络服务启动IPADDR=&quot;192.168.22.101&quot; # 该网卡ip地址就是你要配置的固定IP，如果你要用xshell等工具连接，22这个网段最好和你自己的电脑网段一致，否则有可能用xshell连接失败且连接不上网GATEWAY=&quot;192.168.22.1&quot; # 网关NETMASK=&quot;255.255.255.0&quot; # 子网掩码DNS1=&quot;8.8.8.8&quot; # DNS，8.8.8.8为Google提供的免费DNS服务器的IP地址 配置网络工作在/etc/sysconfig/network文件中增加以下配置 1234vim /etc/sysconfig/network# 修改NETWORKING=yes #网络是否工作，一定不能是no 配置公共DNS服务在/etc/resolv.conf文件中增加以下配置(可选) 1nameserver 8.8.8.8 关闭防火墙12systemctl stop firewalld # 临时关闭systemctl disable firewalld # 禁止开机启动 重启网络服务1service network restart","categories":[{"name":"Liunx","slug":"Liunx","permalink":"https://www.kming6.com/categories/Liunx/"},{"name":"CentOS","slug":"Liunx/CentOS","permalink":"https://www.kming6.com/categories/Liunx/CentOS/"}],"tags":[{"name":"CentOS","slug":"CentOS","permalink":"https://www.kming6.com/tags/CentOS/"},{"name":"虚拟机","slug":"虚拟机","permalink":"https://www.kming6.com/tags/虚拟机/"},{"name":"网络配置","slug":"网络配置","permalink":"https://www.kming6.com/tags/网络配置/"}]},{"title":"Git设置只需要输入一次密码, 就可以进行pull/push操作，不用每次输入密码","slug":"Git设置永久保存密码","date":"2019-09-28T21:38:08.000Z","updated":"2020-06-06T07:48:46.192Z","comments":true,"path":"posts/62324/","link":"","permalink":"https://www.kming6.com/posts/62324/","excerpt":"使用https的方式，每次pull或者push都要输入账号密码，这样操作很烦，又不想设置SSH公钥到远程仓库。如下设置即可输入一次就不用再手输入密码的困扰而且又享受https带来的极速和方便。","text":"使用https的方式，每次pull或者push都要输入账号密码，这样操作很烦，又不想设置SSH公钥到远程仓库。如下设置即可输入一次就不用再手输入密码的困扰而且又享受https带来的极速和方便。 设置输入一次密码后记住密码（默认时间15分钟）： 1git config --global credential.helper cache 也可以自己设置时间，比如一个小时之后失效，可以这样做： 1git config credential.helper &apos;cache --timeout=3600&apos; 还可以永久存储密码： 1git config --global credential.helper store","categories":[{"name":"Git","slug":"Git","permalink":"https://www.kming6.com/categories/Git/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://www.kming6.com/tags/Git/"}]},{"title":"Git提交时忽略已提交过且本地修改过的文件","slug":"Git提交时忽略已提交过且本地修改过的文件","date":"2019-09-26T19:04:27.000Z","updated":"2020-06-06T07:48:46.192Z","comments":true,"path":"posts/58014/","link":"","permalink":"https://www.kming6.com/posts/58014/","excerpt":"有的时候项目的配置文件和测试环境的不一样，本地开发时需要将配置改为本地的，修改后的文件又不提交到远程仓库，怎么办呢？","text":"有的时候项目的配置文件和测试环境的不一样，本地开发时需要将配置改为本地的，修改后的文件又不提交到远程仓库，怎么办呢？ 可以使用如下命令忽略已经修改后但是不提交的文件 1git update-index --assume-unchanged [file-path] 重新恢复提交的命令 1git update-index --no-assume-unchanged [file-path]","categories":[{"name":"Git","slug":"Git","permalink":"https://www.kming6.com/categories/Git/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://www.kming6.com/tags/Git/"}]},{"title":"Liunx终端关闭后shell脚本继续运行","slug":"Liunx终端关闭后shell脚本继续运行","date":"2019-09-13T06:22:11.000Z","updated":"2020-06-06T07:48:46.192Z","comments":true,"path":"posts/2849/","link":"","permalink":"https://www.kming6.com/posts/2849/","excerpt":"一直执行的shell脚本，在终端关闭后就会退出，怎么解决？","text":"一直执行的shell脚本，在终端关闭后就会退出，怎么解决？ 比如运行xxx.sh 1bash xxx.sh 按下ctrl-z中断脚本运行，此时系统提示： 12^Z[1]+ Stopped bash xxx.sh 意思是编号为1的任务挂起了，[1]就是任务的编号，里面的数字也可能是2，3，4… 输入命令： 1bg 1 这个命令将1号任务切换到后台执行 输入命令： 1disown -h %1 这个命令的是将1号任务从当前shell的任务列表中移除，并且忽略HUP信号(Liunx的中断信号)，这样，即使当前Shell结束了，这个任务也不会被结束，而是继续留在后台执行。","categories":[{"name":"Liunx","slug":"Liunx","permalink":"https://www.kming6.com/categories/Liunx/"}],"tags":[{"name":"Liunx","slug":"Liunx","permalink":"https://www.kming6.com/tags/Liunx/"}]},{"title":"Docker拉取镜像出错","slug":"Docker拉取镜像出错","date":"2019-09-12T21:54:41.000Z","updated":"2020-06-06T07:48:46.192Z","comments":true,"path":"posts/6854/","link":"","permalink":"https://www.kming6.com/posts/6854/","excerpt":"docker pull镜像的时候出错 1ERROR: Get https://registry-1.docker.io/v2/: dial tcp: lookup registry-1.docker.io on 8.8.8.8:53: too many redirects","text":"docker pull镜像的时候出错 1ERROR: Get https://registry-1.docker.io/v2/: dial tcp: lookup registry-1.docker.io on 8.8.8.8:53: too many redirects 解决方法执行以下命令1dig @114.114.114.114 registry-1.docker.io 执行后结果如下： 12345678910111213141516171819202122232425262728293031323334353637383940414243; &lt;&lt;&gt;&gt; DiG 9.9.4-RedHat-9.9.4-61.el7 &lt;&lt;&gt;&gt; @114.114.114.114 registry-1.docker.io; (1 server found);; global options: +cmd;; Got answer:;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 52963;; flags: qr rd ra; QUERY: 1, ANSWER: 8, AUTHORITY: 4, ADDITIONAL: 9;; OPT PSEUDOSECTION:; EDNS: version: 0, flags:; udp: 4096;; QUESTION SECTION:;registry-1.docker.io. IN A;; ANSWER SECTION:registry-1.docker.io. 300 IN A 3.210.179.11registry-1.docker.io. 300 IN A 52.55.198.220registry-1.docker.io. 300 IN A 52.70.175.131registry-1.docker.io. 300 IN A 54.175.43.85registry-1.docker.io. 300 IN A 54.210.105.17registry-1.docker.io. 300 IN A 100.24.246.89registry-1.docker.io. 300 IN A 54.88.231.116registry-1.docker.io. 300 IN A 52.87.94.70;; AUTHORITY SECTION:docker.io. 61407 IN NS ns-1168.awsdns-18.org.docker.io. 61407 IN NS ns-421.awsdns-52.com.docker.io. 61407 IN NS ns-1827.awsdns-36.co.uk.docker.io. 61407 IN NS ns-513.awsdns-00.net.;; ADDITIONAL SECTION:ns-1827.awsdns-36.co.uk. 57947 IN A 205.251.199.35ns-1827.awsdns-36.co.uk. 57273 IN AAAA 2600:9000:5307:2300::1ns-1168.awsdns-18.org. 47450 IN A 205.251.196.144ns-1168.awsdns-18.org. 57090 IN AAAA 2600:9000:5304:9000::1ns-421.awsdns-52.com. 143703 IN A 205.251.193.165ns-421.awsdns-52.com. 57067 IN AAAA 2600:9000:5301:a500::1ns-513.awsdns-00.net. 45649 IN A 205.251.194.1ns-513.awsdns-00.net. 45650 IN AAAA 2600:9000:5302:100::1;; Query time: 5 msec;; SERVER: 114.114.114.114#53(114.114.114.114);; WHEN: Thu Sep 12 21:50:15 CST 2019;; MSG SIZE rcvd: 493 修改 /etc/hosts文件，强制docker.io域名解析到可用IP，添加13.210.179.11 registry-1.docker.io","categories":[{"name":"Docker","slug":"Docker","permalink":"https://www.kming6.com/categories/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://www.kming6.com/tags/Docker/"}]},{"title":"Liunx记录登录用户和操作记录","slug":"Liunx记录登录用户和操作记录","date":"2019-09-11T23:15:37.000Z","updated":"2020-06-06T07:48:46.192Z","comments":true,"path":"posts/62916/","link":"","permalink":"https://www.kming6.com/posts/62916/","excerpt":"","text":"通过在/etc/profile里面加入以下代码就可以实现记录登陆后的IP地址和某用户名所操作的历史记录 123456789101112131415161718192021PS1=\"`whoami`@`hostname`:\"'[$PWD]'historyUSER_IP=`who -u am i 2&gt;/dev/null| awk '&#123;print $NF&#125;'|sed -e 's/[()]//g'`if [ \"$USER_IP\" = \"\" ]thenUSER_IP=`hostname`fiif [ ! -d /tmp/dbasky ]thenmkdir /tmp/dbaskychmod 777 /tmp/dbaskyfiif [ ! -d /tmp/dbasky/$&#123;LOGNAME&#125; ]thenmkdir /tmp/dbasky/$&#123;LOGNAME&#125;chmod 300 /tmp/dbasky/$&#123;LOGNAME&#125;fiexport HISTSIZE=4096DT=`date \"+%Y-%m-%d_%H:%M:%S\"`export HISTFILE=\"/tmp/dbasky/$&#123;LOGNAME&#125;/$&#123;USER_IP&#125; dbasky.$DT\"chmod 600 /tmp/dbasky/$&#123;LOGNAME&#125;/*dbasky* 2&gt;/dev/null 别忘记执行下面命令使脚本生效 1source /etc/profile /tmp/dbasky/root目录下查看记录信息","categories":[{"name":"Liunx","slug":"Liunx","permalink":"https://www.kming6.com/categories/Liunx/"}],"tags":[{"name":"Liunx","slug":"Liunx","permalink":"https://www.kming6.com/tags/Liunx/"}]},{"title":"Centos7上安装Docker","slug":"Centos7上安装Docker","date":"2019-09-10T21:13:55.000Z","updated":"2020-06-06T07:48:46.192Z","comments":true,"path":"posts/19477/","link":"","permalink":"https://www.kming6.com/posts/19477/","excerpt":"","text":"通过yum源安装docker1yum -y install docker 启动docker1systemctl start docker 开机自启1sudo systemctl enable docker","categories":[{"name":"Docker","slug":"Docker","permalink":"https://www.kming6.com/categories/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://www.kming6.com/tags/Docker/"}]},{"title":"Docker运行mysql挂载数据卷权限问题","slug":"Docker运行mysql挂载数据卷权限问题","date":"2019-09-08T12:04:49.000Z","updated":"2020-06-06T07:48:46.192Z","comments":true,"path":"posts/53756/","link":"","permalink":"https://www.kming6.com/posts/53756/","excerpt":"使用docker-compose运行mysql容器报错，没有执行权限的问题","text":"使用docker-compose运行mysql容器报错，没有执行权限的问题 docker-compose.yml 内容如下所示1234567891011121314version: &quot;2&quot;services: mysql: container_name: mysql image: mysql:5.5.60 restart: always ports: - &quot;3306:3306&quot; volumes: - ./mysql/data:/var/lib/mysql environment: MYSQL_ROOT_PASSWORD: &quot;123456&quot; 报错信息1chown: cannot read directory '/var/lib/mysql/': Permission denied 解决方法该原因为centOs7默认开启selinux安全模块,需要临时关闭该安全模块。 12临时关闭selinux：su -c &quot;setenforce 0&quot;重新开启selinux：su -c &quot;setenforce 1&quot; 或者添加目录到白名单，添加selinux规则，将要挂载的目录添加到白名单： 1chcon -Rt svirt_sandbox_file_t ./mysql/data","categories":[{"name":"Docker","slug":"Docker","permalink":"https://www.kming6.com/categories/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://www.kming6.com/tags/Docker/"},{"name":"Mysql","slug":"Mysql","permalink":"https://www.kming6.com/tags/Mysql/"}]},{"title":"git push到GitHub的时候遇到! [rejected] master -> master (non-fast-forward)的问题","slug":"git-push到GitHub的时候遇到的问题","date":"2019-09-05T21:38:03.000Z","updated":"2020-06-06T07:48:46.196Z","comments":true,"path":"posts/59083/","link":"","permalink":"https://www.kming6.com/posts/59083/","excerpt":"git push到GitHub的时候遇到! [rejected] master -&gt; master (non-fast-forward)的问题","text":"git push到GitHub的时候遇到! [rejected] master -&gt; master (non-fast-forward)的问题 出现错误的原因1、在manage文件夹里打开git，输入git init初始化本地仓库，GitHub创建远程仓库manage 2、以下命令关联本地和远程仓库，xxx为github厂库用户名 1git remote add origin git@github.com:xxx/manage.git 3、本地已经有项目代码了在add和commit之后，想要push到远程仓库，报错： 123456 ! [rejected] master -&gt; master (non-fast-forward)error: failed to push some refs to &apos;git@github.com:xxx/spring-study.git&apos;hint: Updates were rejected because the tip of your current branch is behindhint: its remote counterpart. Integrate the remote changes (e.g.hint: &apos;git pull ...&apos;) before pushing again.hint: See the &apos;Note about fast-forwards&apos; in &apos;git push --help&apos; for details. 解决方式1、git pull origin master –allow-unrelated-histories //把远程仓库和本地同步，消除差异 2、重新add和commit相应文件 3、执行命令 1git push origin master 4、此时就能push成功了","categories":[{"name":"Git","slug":"Git","permalink":"https://www.kming6.com/categories/Git/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://www.kming6.com/tags/Git/"},{"name":"GitHub","slug":"GitHub","permalink":"https://www.kming6.com/tags/GitHub/"}]},{"title":"关于java的垃圾收集器","slug":"关于java的垃圾收集器","date":"2019-09-04T21:00:20.000Z","updated":"2020-06-06T07:48:46.196Z","comments":true,"path":"posts/53302/","link":"","permalink":"https://www.kming6.com/posts/53302/","excerpt":"虽然对各个收集器进行比较，但并非要挑选出一个最好的收集器。因为知道现在为止还没有所谓最好的垃圾收集器出现，也更加没有万能的垃圾收集器，而是根据具体应用场景选择适合自己的垃圾收集器。如果有一种任何场景下都适用的完美收集器存在，那么HotSpot虚拟机就不会实现那么多不同的垃圾收集器了","text":"虽然对各个收集器进行比较，但并非要挑选出一个最好的收集器。因为知道现在为止还没有所谓最好的垃圾收集器出现，也更加没有万能的垃圾收集器，而是根据具体应用场景选择适合自己的垃圾收集器。如果有一种任何场景下都适用的完美收集器存在，那么HotSpot虚拟机就不会实现那么多不同的垃圾收集器了 Serial 收集器 Serial（串行）收集器收集器是最基本、历史最悠久的垃圾收集器了。看名字就知道这个收集器是一个单线程收集器了。它的 “单线程” 的意义不仅仅意味着它只会使用一条垃圾收集线程去完成垃圾收集工作，更重要的是它在进行垃圾收集工作的时候必须暂停其他所有的工作线程（ “Stop The World” ），直到它收集结束。 虚拟机的设计者们当然知道 Stop The World 带来的不良用户体验，所以在后续的垃圾收集器设计中停顿时间在不断缩短（仍然还有停顿，寻找最优秀的垃圾收集器的过程仍然在继续）。 但是 Serial 收集器有没有优于其他垃圾收集器的地方呢？当然有，它简单而高效（与其他收集器的单线程相比）。Serial 收集器由于没有线程交互的开销，自然可以获得很高的单线程收集效率。Serial 收集器对于运行在 Client 模式下的虚拟机来说是个不错的选择 ParNew 收集器 ParNew 收集器其实就是 Serial 收集器的多线程版本，除了使用多线程进行垃圾收集外，其余行为（控制参数、收集算法、回收策略等等）和 Serial 收集器完全一样。 它是许多运行在 Server 模式下的虚拟机的首要选择，除了 Serial 收集器外，只有它能与 CMS 收集器（真正意义上的并发收集器，后面会介绍到）配合工作。 并行和并发概念：并行（Parallel） ：指多条垃圾收集线程并行工作，但此时用户线程仍然处于等待状态。并发（Concurrent）：指用户线程与垃圾收集线程同时执行（但不一定是并行，可能会交替执行），用户程序在继续运行，而垃圾收集器运行在另一个 CPU 上。 Parallel Scavenge 收集器 Parallel Scavenge 收集器也是使用复制算法的多线程收集器，它看上去几乎和ParNew都一样 1234567-XX:+UseParallelGC 使用 Parallel 收集器+ 老年代串行-XX:+UseParallelOldGC 使用 Parallel 收集器+ 老年代并行 Parallel Scavenge 收集器关注点是吞吐量（高效率的利用 CPU）。CMS 等垃圾收集器的关注点更多的是用户线程的停顿时间（提高用户体验）。所谓吞吐量就是 CPU 中用于运行用户代码的时间与 CPU 总消耗时间的比值。 Parallel Scavenge 收集器提供了很多参数供用户找到最合适的停顿时间或最大吞吐量，如果对于收集器运作不太了解的话，手工优化存在困难的话可以选择把内存管理优化交给虚拟机去完成也是一个不错的选择。 Serial Old 收集器 Serial 收集器的老年代版本，它同样是一个单线程收集器。它主要有两大用途：一种用途是在 JDK1.5 以及以前的版本中与 Parallel Scavenge 收集器搭配使用，另一种用途是作为 CMS 收集器的后备方案。 Parallel Old 收集器 Parallel Scavenge 收集器的老年代版本。使用多线程和“标记-整理”算法。在注重吞吐量以及 CPU 资源的场合，都可以优先考虑 Parallel Scavenge 收集器和 Parallel Old 收集器。 CMS 收集器 CMS（Concurrent Mark Sweep）收集器是一种以获取最短回收停顿时间为目标的收集器。它非常符合在注重用户体验的应用上使用。 CMS（Concurrent Mark Sweep）收集器是 HotSpot 虚拟机第一款真正意义上的并发收集器，它第一次实现了让垃圾收集线程与用户线程（基本上）同时工作。 从名字中的Mark Sweep这两个词可以看出，CMS 收集器是一种 “标记-清除”算法实现的，它的运作过程相比于前面几种垃圾收集器来说更加复杂一些。整个过程分为四个步骤： 初始标记： 暂停所有的其他线程，并记录下直接与 root 相连的对象，速度很快 ； 并发标记： 同时开启 GC 和用户线程，用一个闭包结构去记录可达对象。但在这个阶段结束，这个闭包结构并不能保证包含当前所有的可达对象。因为用户线程可能会不断的更新引用域，所以 GC 线程无法保证可达性分析的实时性。所以这个算法里会跟踪记录这些发生引用更新的地方。 重新标记： 重新标记阶段就是为了修正并发标记期间因为用户程序继续运行而导致标记产生变动的那一部分对象的标记记录，这个阶段的停顿时间一般会比初始标记阶段的时间稍长，远远比并发标记阶段时间短 并发清除： 开启用户线程，同时 GC 线程开始对为标记的区域做清扫。 从它的名字就可以看出它是一款优秀的垃圾收集器，主要优点：并发收集、低停顿。但是它有下面三个明显的缺点： 对 CPU 资源敏感； 无法处理浮动垃圾； 它使用的回收算法-“标记-清除”算法会导致收集结束时会有大量空间碎片产生。 G1 收集器 G1 (Garbage-First) 是一款面向服务器的垃圾收集器,主要针对配备多颗处理器及大容量内存的机器. 以极高概率满足 GC 停顿时间要求的同时,还具备高吞吐量性能特征. 被视为 JDK1.7 中 HotSpot 虚拟机的一个重要进化特征。它具备一下特点： 并行与并发：G1 能充分利用 CPU、多核环境下的硬件优势，使用多个 CPU（CPU 或者 CPU 核心）来缩短 Stop-The-World 停顿时间。部分其他收集器原本需要停顿 Java 线程执行的 GC 动作，G1 收集器仍然可以通过并发的方式让 java 程序继续执行。 分代收集：虽然 G1 可以不需要其他收集器配合就能独立管理整个 GC 堆，但是还是保留了分代的概念。 空间整合：与 CMS 的“标记–清理”算法不同，G1 从整体来看是基于“标记整理”算法实现的收集器；从局部上来看是基于“复制”算法实现的。 可预测的停顿：这是 G1 相对于 CMS 的另一个大优势，降低停顿时间是 G1 和 CMS 共同的关注点，但 G1 除了追求低停顿外，还能建立可预测的停顿时间模型，能让使用者明确指定在一个长度为 M 毫秒的时间片段内。 G1 收集器的运作大致分为以下几个步骤： 初始标记 并发标记 最终标记 筛选回收 G1 收集器在后台维护了一个优先列表，每次根据允许的收集时间，优先选择回收价值最大的 Region(这也就是它的名字 Garbage-First 的由来)。这种使用 Region 划分内存空间以及有优先级的区域回收方式，保证了 GF 收集器在有限时间内可以尽可能高的收集效率（把内存化整为零）。","categories":[{"name":"Java","slug":"Java","permalink":"https://www.kming6.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.kming6.com/tags/Java/"}]},{"title":"Java8的Lambda表达式","slug":"Java8的Lambda表达式-上","date":"2019-08-30T21:46:34.000Z","updated":"2020-06-06T07:48:46.192Z","comments":true,"path":"posts/43742/","link":"","permalink":"https://www.kming6.com/posts/43742/","excerpt":"Java 8版本是现在Java最流行的一个版本。主要改进Java在面向对象的基础上对函数式编程的支持。本文将展示Lambda的基本语法。","text":"Java 8版本是现在Java最流行的一个版本。主要改进Java在面向对象的基础上对函数式编程的支持。本文将展示Lambda的基本语法。 为什么使用Lambda表达式我们使用Java的集合经常会定义比较器来进行集合排序。比如要按照字符串长度对字符进行排序，实现一个自定义的Comparator对象并传递给方法进行排序，如： 12345678class LengthComparator implements Comparator&lt;String&gt; &#123; public int compare(String firstStr, String secondStr) &#123; return Integer.compare(firstStr.length(), secondStr.length()); &#125;&#125;Arrays.sort(strings, new LengthComparator()); 编写这一段用于比较的代码片段，封装在自定义的Comparator里。Arrays.sort方法会在适当时机就会调用此代码片段，对strings数组进行排序。那么，这个适当时机，是什么时候呢？它可能是某个按钮被点击时，也可能是某个新线程被启动时，如： 12345678910class MyRunner implements Runnable &#123; public void run() &#123; for(int i = 0; i &lt; 1000; i++) &#123; System.our.println(\"do work\"); &#125; &#125; ...&#125;new Thread(new MyRunner()).start(); 把一段代码块传递 - 线程池，排序方法。希望在适当时机需要时，调用这段代码来进行相关工作或排序。 在java8以前，想要传递代码块很不容易。我们只能把代码块写在一个特殊的类里, 或者使用匿名内部类的方式，实例化一个类对象来传递这段代码。 Lambda的语法对于字符串排序，需要明确两个问题 处理传入的参数类型是什么？是什么数据类型？ 使用什么代码片段来进行处理？ 于是，Lambda的表达式可以: 1(String str1, String str2) -&gt; Integer.compare(str1.length(), str2.length()); 如果可以推断Lambda的参数类型，可以省略类型，如： 1Comparator&lt;String&gt; com = (str1, str2) -&gt; Integer.compare(str1.length(), str2.length());","categories":[{"name":"Java","slug":"Java","permalink":"https://www.kming6.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.kming6.com/tags/Java/"}]},{"title":"Mysql导入导出命令详解","slug":"Mysql导入导出命令详解","date":"2019-08-13T20:10:29.000Z","updated":"2020-06-06T07:48:46.192Z","comments":true,"path":"posts/62076/","link":"","permalink":"https://www.kming6.com/posts/62076/","excerpt":"Mysql导入导出数据库经常使用，记录一下以后方便查找","text":"Mysql导入导出数据库经常使用，记录一下以后方便查找 导出数据和表结构 使用mysqldump可以加上--default-character-set=utf8防止乱码，加上--hex-blob导出二进制数据，如果导出时不设置hex-blob模式，同样将导出数据再次导入时二进制数据会丢失和错乱 12345mysqldump -u用户名 -p密码 --default-character-set=utf8 --hex-blob 数据库名 &gt; 数据库名.sqlmysqldump -uroot -p123456 --default-character-set=utf8 test &gt; test.sqlmysqldump -uroot -p test &gt; test.sql 只导出表结构123mysqldump -u用户名 -p密码 -d 数据库名 &gt; 数据库名.sqlmysqldump -uroot -p123456 -d test &gt; test.sql 导入数据库使用mysql命令导入123mysql -u用户名 -p 数据库名 &lt; 数据库名.sqlmysql -uroot -p123456 test &lt; test.sql 使用source命令导入12use test; # 使用已经创建的数据库source /home/test/test.sql # 导入备份的sql文件 导出远程数据库123mysqldump -h远程服务器ip地址 -P端口号 -u用户名 -p密码 --default-character-set=utf8 test &gt; /home/test/test.sqlmysqldump -h192.168.22.11 –P3306 -uroot -ppassword --default-character-set=utf8 test &gt; /home/test/test.sql","categories":[{"name":"数据库","slug":"数据库","permalink":"https://www.kming6.com/categories/数据库/"},{"name":"Mysql","slug":"数据库/Mysql","permalink":"https://www.kming6.com/categories/数据库/Mysql/"}],"tags":[{"name":"Mysql","slug":"Mysql","permalink":"https://www.kming6.com/tags/Mysql/"}]},{"title":"Mysql数据库设计规范","slug":"Mysql数据库设计规范","date":"2019-08-10T23:03:34.000Z","updated":"2020-06-06T07:48:46.192Z","comments":true,"path":"posts/14649/","link":"","permalink":"https://www.kming6.com/posts/14649/","excerpt":"一般使用Mysql数据比较多，但是有点小伙伴很少考虑Mysql设计上的细节问题，像SQL语句的规范、索引上的规范等等，本文经过整理后得到一些常用的Mysql数据库设计规范。","text":"一般使用Mysql数据比较多，但是有点小伙伴很少考虑Mysql设计上的细节问题，像SQL语句的规范、索引上的规范等等，本文经过整理后得到一些常用的Mysql数据库设计规范。 Mysql命令规范1234- 所有数据库表命名都用小写字母、并用下换线分割- 所有数据库表名尽量不要使用Mysql关键字命名、能看到名称大概了解表是做什么的- 临时表以tmp_为前缀、日期后缀区分，备份表以bak_为前缀、日期后缀- 相同的数据字段，在所有表中的列明和类型尽量保持一致 基本设计规范1234567891011- 大部分情况尽量使用InnoDB引擎，InnoDB支持事务、行级锁、性能更好- 数据库尽量使用utf8mb4的字符集，兼容性好，避免乱码和索引创建失败的问题- 表和字段都尽量加上注释，方便以后维护- 尽量不要使用存储过程、视图、触发器、Event。可以减少数据库资源的占用、将计算转移到服务层- 单表的数据量尽量控制在500万以内，数据量过大影响Mysql性能和维护，更多的数据可以对数据库进行分库分表拆分，控制单表的数据量- 尽量不要使用Mysql的分区功能，分区是物理上多个文件，逻辑上一个文件，查询效率很低。可以使用中间件mycat、sharding-jdbc等进行物理分区- 尽量减少表的宽度、数据冷热数据进行分离、保证每个表都有主键 - Mysql列数限制在为4096列，每一行数据不超过65535字节；宽度越大、加载的内存就越大，IO消耗也就越大 - 经常用的数据放在一起，不常用的数据分离出去，可以极大提高效率 - 主键可以更好的利用索引，提高查询效率- 表中尽量不用外键，通过程序来维护，外键导致表与表之间耦合，涉及相关的表，十分影响性能且容易造成死锁 字段涉及规范1234567891011121314151617- 优先选择符合业务最小的存储类型，节省数据空间减少IO消耗- 字段定义使用Not Null，可以提供一个默认值 - null值索引很难优化，null值更占用空间，需要额外空间标识 - null值操作只能采用is null或is not null - 不能采用=、in、&lt;、&lt;&gt;、not in、！=操作符，不方便操作，where name != &apos;abc&apos;, 不会查询出name为null的数据- 尽量不使用Text、Blob类型 - Mysql使用Text、Blob类型就不使用内存临时表而使用磁盘临时空间、性能差浪费磁盘和内存空间。 - 降低数据库内存命中率 - 可以单独建立扩展表使用- 尽量不使用Enum、用Tinyint - 修改Enum值时，需要通过alter修改表 - order by的操作效率低- 尽量不要使用小数，尤其涉及金钱等精度要求较高的类型 - 最好使用整数，小数存储有精度的误差，导致金额对不上- 时间尽量使用Timestamp或者Datetime类型存储时间，不要使用String类型 - 使用String无法使用日期函数进行比较比较 - 用String会占用更多的空间 索引设计规范1234567- 表的索引不要太多，尽量5个以下，索引增加查询效率同时也会降低插入和更新的效率 - 索引太多会影响Mysql优化器，优化器消耗时间增加，反而降低查询到的性能- 更新频繁的列、或者列值区分度不高的列(如：性别，只有男、女、未知)不要加索引- 联合索引，把区分度高的放在左侧，尽量遵循最左索引原则 - 区分度高的列放在最左侧 - 查询频繁的列放在最左侧 - 字段长度小的放在最左侧 SQL语句规范1234567891011121314151617- 尽量不要使属性隐式转换，隐式转换使索引失效 - SELECT name FROM project WHERE id = `&apos;1000&apos;`; id为整型，用`1000`代替- 程序中使用预编译语句操作数据库，减少SQL编译时间同时防止SQL注入- insert语句尽量包含字段 - 如：INSERT INTO test values(&apos;1&apos;, &apos;abc&apos;);应该INSERT INTO test(id, name) values(&apos;1&apos;, &apos;abc&apos;)- 尽量不要使用%开头的模糊查询 - not、!=、&lt;&gt;、not in、not like以及%开头等，会是查询不走索引而全变扫描- 联合索引只能有一列进行范围查询 - a1,a2,a3联合索引，a1范围查询，a2，a3列不会走索引，可以把a1放在最后- Where语句后的字段尽量不要使用函数或表达式，否则不会走索引 - SELECT id FROM t WHERE num/2=100，这将导致引擎放弃使用索引而进行全表扫描，可改为：SELECT id FROM t WHERE num=100*2 - SELECT id FROM t WHERE substring(name,1,3)=&apos;abc&apos;--name以abc开头的id，应改为:SELECT id FROM t WHERE name LIKE &apos;abc%&apos; - SELECT id FROM t WHERE datediff(day,createdate,&apos;2005-11-30&apos;)=0--&apos;2015-11-30&apos;生成的id，应改为:SELECT id FROM t WHERE createdate&gt;=&apos;2015-11-30&apos; AND createdate&lt;&apos;2015-12-1&apos;- 大表不要使用子查询，不使用JOIN查询- 避免JOIN关联太多表- OR条件可以换成IN查询- 尽量减少与数据库交互次数","categories":[{"name":"数据库","slug":"数据库","permalink":"https://www.kming6.com/categories/数据库/"},{"name":"Mysql","slug":"数据库/Mysql","permalink":"https://www.kming6.com/categories/数据库/Mysql/"}],"tags":[{"name":"Mysql","slug":"Mysql","permalink":"https://www.kming6.com/tags/Mysql/"}]},{"title":"Docker安装后报Cannot connect to the docker daemon at ...","slug":"Docker使用报错","date":"2019-07-31T23:03:34.000Z","updated":"2020-06-06T07:48:46.192Z","comments":true,"path":"posts/61412/","link":"","permalink":"https://www.kming6.com/posts/61412/","excerpt":"Docker安装后报错：Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?","text":"Docker安装后报错：Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running? 解决方式执行以下命令123systemctl daemon-reloadsudo service docker restartsudo service docker status (should see active (running))","categories":[{"name":"Docker","slug":"Docker","permalink":"https://www.kming6.com/categories/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://www.kming6.com/tags/Docker/"}]},{"title":"About Hexo","slug":"Blog","date":"2019-07-31T23:03:34.000Z","updated":"2020-06-06T07:48:46.192Z","comments":true,"path":"posts/15470/","link":"","permalink":"https://www.kming6.com/posts/15470/","excerpt":"Welcome to this Blog!","text":"Welcome to this Blog! Quick StartCreate a new post1hexo new \"My New Post\" More info: Writing Run server1hexo server More info: Server Generate static files1hexo generate More info: Generating Deploy to remote sites1hexo deploy More info: Deployment Clean1hexo clean","categories":[{"name":"Hexo","slug":"Hexo","permalink":"https://www.kming6.com/categories/Hexo/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://www.kming6.com/tags/Hexo/"}]}]}