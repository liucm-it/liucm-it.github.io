var customSearch;!function(c){"use strict";var i=80,l=c(".l_header",".cover-wrapper");function s(e,a){a=a||i;var t=e.href?c(e.getAttribute("href")):c(e);c("html, body").animate({scrollTop:t.offset().top-a},400)}l[0]&&(i=l[0].clientHeight+16),c(function(){var a,t,o,n;!function(){if(window.subData){var t=c("header .wrapper"),e=c(".s-comment",t),a=c(".s-toc",t);t.find(".nav-sub .logo").text(window.subData.title);var o=document.body.scrollTop;c(document,window).scroll(function(){var e=c(window).scrollTop(),a=e-o;50<=a&&100<e?(o=e,t.addClass("sub")):a<=-50&&(o=e,t.removeClass("sub"))});var n=c("#comments");n.length?e.click(function(e){e.preventDefault(),e.stopPropagation(),s(n)}):e.remove();var r=c(".toc-wrapper");r.length&&r.children().length?a.click(function(e){e.stopPropagation(),r.toggleClass("active")}):a.remove()}}(),function(){var e=c("body .navgation");e.find("li a.active").removeClass("active");var a=null,t=location.pathname.replace(/\/|%/g,"");0==t.length&&(t="home");var o=t.match(/page\d{0,}$/g);o&&(o=o[0],t=t.split(o)[0]);var n,r=t.match(/index.html/);r&&(r=r[0],t=t.split(r)[0]),t&&e&&(a=c("#"+t,e),(n=a)&&n.length&&n.addClass("active").siblings().removeClass("active"))}(),(a=c(".l_header .switcher .s-menu")).click(function(e){e.stopPropagation(),c("body").toggleClass("z_menu-open"),a.toggleClass("active")}),c(document).click(function(e){c("body").removeClass("z_menu-open"),a.removeClass("active")}),t=c(".l_header .switcher .s-search"),o=c(".l_header"),n=c(".l_header .m_search"),0!==t.length&&(t.click(function(e){e.stopPropagation(),o.toggleClass("z_search-open"),n.find("input").focus()}),c(document).click(function(e){o.removeClass("z_search-open")}),n.click(function(e){e.stopPropagation()}),o.ready(function(){o.bind("keydown",function(a){if(9==a.keyCode)return!1;var t,o,n=!!document.all;o=n?(t=window.event.keyCode,window.event):(t=e.which,e),9==t&&(n?(o.keyCode=0,o.returnValue=!1):(o.which=0,o.preventDefault()))})})),function(){var a=c(".toc-wrapper");if(0!==a.length){c(document).click(function(){return a.removeClass("active")}),a.on("click","a",function(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName?s(e.target):"SPAN"===e.target.tagName&&s(e.target.parentElement),a.removeClass("active")});var n=Array.from(a.find("li a")),e=function(){return n.map(function(e){return Math.floor(c(e.getAttribute("href")).offset().top-i)})},r=e(),t=function(){var e=c("html").scrollTop()||c("body").scrollTop();if(r){for(var a=0,t=r.length-1,o=void 0;a<t;)r[o=a+t+1>>1]===e?a=t=o:r[o]<e?a=o:t=o-1;c(n).removeClass("active").eq(a).addClass("active")}};c(window).resize(function(){r=e(),t()}).scroll(function(){t()}),t()}}(),function(){var e=c(".menu .active"),t=c(".s-top"),a=c("h1.title","#header-meta"),o=c(".l_body");e.length&&o&&e.click(function(e){e.preventDefault(),e.stopPropagation(),s(o)}),a.length&&o&&a.click(function(e){e.preventDefault(),e.stopPropagation(),s(o)}),t.length&&o&&t.click(function(e){e.preventDefault(),e.stopPropagation(),s(o)});var n=c(".cover-wrapper"),r=0;n[0]&&(r=n[0].clientHeight-164);var i=document.body.scrollTop;c(document,window).scroll(function(){var e=c(window).scrollTop(),a=e-i;150<(i=e)?(t.addClass("show"),0<a?t.removeClass("hl"):t.addClass("hl")):t.removeClass("show").removeClass("hl"),r<e?l.addClass("show"):l.removeClass("show")})}(),setTimeout(function(){c("#loading-bar-wrapper").fadeOut(500)},300),"google"===SEARCH_SERVICE?customSearch=new GoogleCustomSearch({apiKey:GOOGLE_CUSTOM_SEARCH_API_KEY,engineId:GOOGLE_CUSTOM_SEARCH_ENGINE_ID,imagePath:"/images/"}):"algolia"===SEARCH_SERVICE?customSearch=new AlgoliaSearch({apiKey:ALGOLIA_API_KEY,appId:ALGOLIA_APP_ID,indexName:ALGOLIA_INDEX_NAME,imagePath:"/images/"}):"hexo"===SEARCH_SERVICE?customSearch=new HexoSearch({imagePath:"/images/"}):"azure"===SEARCH_SERVICE?customSearch=new AzureSearch({serviceName:AZURE_SERVICE_NAME,indexName:AZURE_INDEX_NAME,queryKey:AZURE_QUERY_KEY,imagePath:"/images/"}):"baidu"===SEARCH_SERVICE&&(customSearch=new BaiduSearch({apiId:BAIDU_API_ID,imagePath:"/images/"}))})}(jQuery);